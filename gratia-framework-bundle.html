<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gratia Skills Framework</title>
    <style>
/* Gratia Skills Framework - Clean, Accessible Styles */

:root {
    /* Brand Colors - Gratia Teal */
    --primary: #0F766E;
    --primary-light: #0D9488;
    --primary-dark: #115E59;

    /* Level Colors - Distinct for each level */
    --level-a1: #64748B;
    --level-a2: #0D9488;
    --level-a3: #0F766E;
    --level-a4: #134E4A;

    /* Certification Colors */
    --cert-expert: #F59E0B;
    --cert-proficient: #0D9488;
    --cert-familiar: #06B6D4;

    /* AQS Component Colors */
    --accuracy-color: #0D9488;
    --delivery-color: #3B82F6;
    --prof-color: #8B5CF6;

    /* Semantic Colors */
    --success: #059669;
    --success-light: #10B981;
    --warning: #D97706;
    --warning-light: #F59E0B;
    --danger: #DC2626;
    --danger-light: #EF4444;

    /* Neutrals - Improved Contrast */
    --text-primary: #111827;
    --text-secondary: #374151;
    --text-muted: #4B5563;
    --background: #F9FAFB;
    --surface: #FFFFFF;
    --border: #E5E7EB;
    --border-dark: #D1D5DB;

    /* Spacing */
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 16px;
    --space-lg: 24px;
    --space-xl: 32px;
    --space-2xl: 48px;

    /* Typography */
    --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
    --font-size-xs: 12px;
    --font-size-sm: 13px;
    --font-size-base: 14px;
    --font-size-md: 16px;
    --font-size-lg: 18px;
    --font-size-xl: 22px;
    --font-size-2xl: 28px;

    /* Borders & Shadows */
    --radius-sm: 4px;
    --radius: 8px;
    --radius-lg: 12px;
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
    --shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
    --shadow-lg: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
}

/* Reset & Base */
*, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    line-height: 1.5;
    color: var(--text-primary);
    background: var(--background);
}

/* App Container */
.app-container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* ===== NAVIGATION ===== */
.top-nav {
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    padding: 0 var(--space-lg);
    display: flex;
    align-items: center;
    height: 60px;
    position: sticky;
    top: 0;
    z-index: 100;
}

.nav-brand {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-weight: 600;
    font-size: var(--font-size-md);
    margin-right: var(--space-2xl);
    color: var(--text-primary);
}

.brand-icon {
    width: 32px;
    height: 32px;
    background: var(--primary);
    color: white;
    border-radius: var(--radius);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-lg);
}

.mobile-menu-btn {
    display: none;
    flex-direction: column;
    gap: 4px;
    padding: var(--space-sm);
    background: none;
    border: none;
    cursor: pointer;
}

.mobile-menu-btn span {
    width: 20px;
    height: 2px;
    background: var(--text-primary);
    border-radius: 1px;
}

.nav-tabs {
    display: flex;
    gap: var(--space-xs);
}

.nav-tab {
    padding: var(--space-sm) var(--space-md);
    background: none;
    border: none;
    border-radius: var(--radius);
    font-size: var(--font-size-base);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.nav-tab:hover {
    background: var(--background);
    color: var(--text-primary);
}

.nav-tab.active {
    background: var(--primary);
    color: white;
}

/* ===== TOAST NOTIFICATIONS ===== */
.toast-container {
    position: fixed;
    top: 80px;
    right: var(--space-lg);
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.toast {
    padding: var(--space-md) var(--space-lg);
    background: var(--surface);
    border-radius: var(--radius);
    box-shadow: var(--shadow-lg);
    animation: slideIn 0.3s ease;
}

.toast.success { }
.toast.warning { }
.toast.error { }

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

/* ===== MAIN CONTENT ===== */
.main-content {
    flex: 1;
    padding: var(--space-xl);
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
}

/* Views */
.view {
    display: none;
}

.view.active {
    display: block;
}

.view-header {
    margin-bottom: var(--space-xl);
}

.view-header h1 {
    font-size: var(--font-size-2xl);
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--space-sm);
}

.view-header p {
    font-size: var(--font-size-md);
    color: var(--text-secondary);
    max-width: 700px;
}

/* ===== TABS (Generic) ===== */
.framework-tabs,
.training-tabs,
.assessment-tabs {
    display: flex;
    gap: var(--space-xs);
    margin-bottom: var(--space-lg);
    border-bottom: 1px solid var(--border);
    padding-bottom: var(--space-sm);
    overflow-x: auto;
}

.framework-tab,
.training-tab,
.assessment-tab {
    padding: var(--space-sm) var(--space-md);
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    font-size: var(--font-size-base);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.framework-tab:hover,
.training-tab:hover,
.assessment-tab:hover {
    color: var(--text-primary);
}

.framework-tab.active,
.training-tab.active,
.assessment-tab.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
    font-weight: 500;
}

/* Framework Sections */
.framework-section {
    display: none;
}

.framework-section.active {
    display: block;
}

.section-header {
    margin-bottom: var(--space-lg);
}

.section-header h2 {
    font-size: var(--font-size-xl);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.section-header p {
    color: var(--text-secondary);
}

.subsection-title {
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin: var(--space-xl) 0 var(--space-md);
}

/* ===== LEVEL CARDS ===== */
.levels-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-lg);
}

.level-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    border-top: 4px solid var(--border);
    transition: box-shadow 0.2s ease;
}

.level-card:hover {
    box-shadow: var(--shadow-lg);
}

.level-card.level-a1 { border-top-color: var(--level-a1); }
.level-card.level-a2 { border-top-color: var(--level-a2); }
.level-card.level-a3 { border-top-color: var(--level-a3); }
.level-card.level-a4 { border-top-color: var(--level-a4); }

.level-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: var(--radius);
    font-weight: 700;
    font-size: var(--font-size-md);
    color: white;
    margin-bottom: var(--space-md);
}

.level-a1 .level-badge { background: var(--level-a1); }
.level-a2 .level-badge { background: var(--level-a2); }
.level-a3 .level-badge { background: var(--level-a3); }
.level-a4 .level-badge { background: var(--level-a4); }

.level-card h3 {
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.level-subtitle {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    margin-bottom: var(--space-md);
}

.level-expectations {
    list-style: none;
    margin-bottom: var(--space-md);
}

.level-expectations li {
    position: relative;
    padding-left: var(--space-md);
    margin-bottom: var(--space-sm);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.level-expectations li::before {
    content: "•";
    position: absolute;
    left: 0;
    color: var(--primary);
}

.level-metrics {
    display: flex;
    gap: var(--space-lg);
    padding-top: var(--space-md);
    border-top: 1px solid var(--border);
}

.metric {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.metric-label {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.metric-value {
    font-size: var(--font-size-md);
    font-weight: 600;
    color: var(--primary);
}

/* ===== TRAITS SECTION ===== */
.level-selector {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.selector-label {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.level-tabs {
    display: flex;
    gap: var(--space-xs);
}

.level-tab {
    padding: var(--space-sm) var(--space-md);
    background: var(--background);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.level-tab:hover {
    border-color: var(--primary);
    color: var(--primary);
}

.level-tab.active {
    background: var(--primary);
    border-color: var(--primary);
    color: white;
}

.traits-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-md);
}

.trait-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.trait-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.trait-icon {
    font-size: var(--font-size-xl);
}

.trait-name {
    font-size: var(--font-size-md);
    font-weight: 600;
}

.trait-description {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    line-height: 1.6;
}

/* ===== CERTIFICATIONS ===== */
.cert-levels-overview {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.cert-level-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-lg);
    text-align: center;
    border: 1px solid var(--border);
}

.cert-level-card.familiar { border-top: 3px solid var(--cert-familiar); }
.cert-level-card.proficient { border-top: 3px solid var(--cert-proficient); }
.cert-level-card.expert { border-top: 3px solid var(--cert-expert); }

.cert-stars {
    font-size: var(--font-size-xl);
    margin-bottom: var(--space-sm);
}

.cert-level-card h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.cert-level-card p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
}

.cert-desc {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.clusters-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: var(--space-md);
}

.cluster-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-md);
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.cluster-icon {
    font-size: var(--font-size-xl);
}

.cluster-name {
    font-size: var(--font-size-sm);
    font-weight: 500;
}

/* ===== AQS SECTION ===== */
.aqs-overview {
    display: flex;
    flex-direction: column;
    gap: var(--space-xl);
}

.aqs-formula-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.aqs-formula-card h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.formula-visual {
    display: flex;
    align-items: stretch;
    gap: var(--space-md);
    flex-wrap: wrap;
}

.formula-component {
    flex: 1;
    min-width: 200px;
    padding: var(--space-md);
    border-radius: var(--radius);
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.formula-component.accuracy { background: rgba(13, 148, 136, 0.1); }
.formula-component.delivery { background: rgba(59, 130, 246, 0.1); }
.formula-component.professionalism { background: rgba(139, 92, 246, 0.1); }
.formula-component.standards { background: rgba(245, 158, 11, 0.1); }

.formula-component .weight {
    font-size: var(--font-size-xl);
    font-weight: 700;
    color: var(--text-primary);
}

.formula-component .name {
    font-size: var(--font-size-sm);
    font-weight: 600;
}

.formula-component .detail {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.formula-operator {
    display: flex;
    align-items: center;
    font-size: var(--font-size-xl);
    font-weight: 300;
    color: var(--text-muted);
}

.aqs-thresholds h3,
.quality-gates h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.threshold-bar {
    display: flex;
    height: 60px;
    border-radius: var(--radius);
    overflow: hidden;
}

.threshold-segment {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: white;
    padding: var(--space-sm);
}

.threshold-segment.a1 { background: var(--level-a1); flex: 2; }
.threshold-segment.a2 { background: var(--level-a2); flex: 2; }
.threshold-segment.a3 { background: var(--level-a3); flex: 1; }
.threshold-segment.a4 { background: var(--level-a4); flex: 1; }

.threshold-label {
    font-size: var(--font-size-md);
    font-weight: 600;
}

.threshold-range {
    font-size: var(--font-size-xs);
    opacity: 0.9;
}

.gates-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md);
}

.gate-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.gate-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    font-weight: 700;
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-sm);
}

.gate-card h4 {
    font-size: var(--font-size-base);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.gate-card p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

/* ===== TRAINING SECTION ===== */
.training-content {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.training-header {
    margin-bottom: var(--space-lg);
}

.training-header h3 {
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.training-header p {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

.training-duration {
    display: inline-block;
    padding: var(--space-xs) var(--space-sm);
    background: var(--background);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-top: var(--space-sm);
}

.training-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.training-trait-card {
    background: var(--background);
    border-radius: var(--radius);
    padding: var(--space-md);
}

.training-trait-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.training-trait-icon {
    font-size: var(--font-size-lg);
}

.training-trait-name {
    font-size: var(--font-size-sm);
    font-weight: 600;
}

.training-modules {
    list-style: none;
}

.training-modules li {
    padding-left: var(--space-md);
    position: relative;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
}

.training-modules li::before {
    content: "→";
    position: absolute;
    left: 0;
    color: var(--primary);
}

.training-resources {
    margin-top: var(--space-md);
    padding-top: var(--space-md);
    border-top: 1px solid var(--border);
}

.resource-link {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-sm);
    text-decoration: none;
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    border-radius: var(--radius-sm);
    transition: background 0.2s;
}

.resource-link:hover {
    background: var(--surface);
    color: var(--primary);
}

.resource-type {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-left: auto;
}

.training-ready-section {
    background: rgba(13, 148, 136, 0.05);
    border-radius: var(--radius);
    padding: var(--space-md);
}

.training-ready-section h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-sm);
    color: var(--primary);
}

.training-ready-section ul {
    list-style: none;
}

.training-ready-section li {
    padding-left: var(--space-md);
    position: relative;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
}

.training-ready-section li::before {
    content: "✓";
    position: absolute;
    left: 0;
    color: var(--success);
    font-weight: 600;
}

/* ===== PROGRESSION TIMELINE ===== */
.progression-timeline {
    position: relative;
    padding: var(--space-lg) 0;
    max-width: 900px;
    margin: 0 auto;
}

.timeline-track {
    position: absolute;
    left: 24px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--border);
}

.timeline-item {
    position: relative;
    padding-left: 70px;
    margin-bottom: var(--space-lg);
}

.timeline-marker {
    position: absolute;
    left: 0;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-md);
    color: white;
    z-index: 1;
}

.timeline-marker.level-a1 { background: var(--level-a1); }
.timeline-marker.level-a2 { background: var(--level-a2); }
.timeline-marker.level-a3 { background: var(--level-a3); }
.timeline-marker.level-a4 { background: var(--level-a4); }

.timeline-content {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.timeline-content h3 {
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.timeline-role {
    font-size: var(--font-size-sm);
    color: var(--primary);
    margin-bottom: var(--space-md);
}

.timeline-requirements {
    list-style: none;
    margin-bottom: var(--space-md);
}

.timeline-requirements li {
    padding-left: var(--space-md);
    position: relative;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
}

.timeline-requirements li::before {
    content: "•";
    position: absolute;
    left: 0;
    color: var(--primary);
}

.timeline-metrics {
    display: flex;
    gap: var(--space-lg);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.timeline-metrics .metric strong {
    color: var(--text-primary);
}

.timeline-transition {
    position: relative;
    padding-left: 70px;
    margin: var(--space-md) 0;
}

.transition-arrow {
    position: absolute;
    left: 20px;
    top: 0;
    bottom: 0;
    width: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.transition-arrow::before {
    content: "";
    width: 2px;
    height: 100%;
    background: linear-gradient(to bottom, var(--primary), var(--border));
}

.transition-info {
    background: rgba(13, 148, 136, 0.05);
    border-radius: var(--radius);
    padding: var(--space-md);
}

.transition-info strong {
    font-size: var(--font-size-base);
    color: var(--text-primary);
    display: block;
    margin-bottom: var(--space-xs);
}

.transition-duration {
    font-size: var(--font-size-sm);
    color: var(--primary);
    margin-bottom: var(--space-sm);
}

.transition-info ul {
    list-style: none;
}

.transition-info li {
    padding-left: var(--space-md);
    position: relative;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
}

.transition-info li::before {
    content: "→";
    position: absolute;
    left: 0;
    color: var(--primary);
}

/* ===== ASSESSMENT VIEW ===== */
.assessment-panel {
    display: none;
}

.assessment-panel.active {
    display: block;
}

.assessment-layout {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    gap: var(--space-xl);
}

.radar-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.radar-section canvas {
    width: 100%;
    max-width: 400px;
    margin: 0 auto;
    display: block;
}

.assessment-summary {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md);
    margin-top: var(--space-lg);
}

.summary-item {
    background: var(--background);
    padding: var(--space-md);
    border-radius: var(--radius);
    text-align: center;
}

.summary-label {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-bottom: var(--space-xs);
}

.summary-value {
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--primary);
}

.traits-assessment {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.skill-group {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-md);
    border: 1px solid var(--border);
}

.skill-group-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.skill-group-icon {
    font-size: var(--font-size-lg);
}

.skill-group-title {
    font-size: var(--font-size-base);
    font-weight: 600;
}

.skill-slider {
    margin-bottom: var(--space-sm);
}

.skill-slider-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: var(--space-sm);
}

.skill-slider-label {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.skill-slider-value {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--primary);
}

.skill-slider input[type="range"] {
    width: 100%;
    height: 6px;
    -webkit-appearance: none;
    background: var(--border);
    border-radius: 3px;
    cursor: pointer;
}

.skill-slider input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    background: var(--primary);
    border-radius: 50%;
    cursor: pointer;
}

.skill-range-labels {
    display: flex;
    justify-content: space-between;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-top: var(--space-xs);
}

.skill-level-desc {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    padding: var(--space-sm);
    background: var(--background);
    border-radius: var(--radius-sm);
}

.desc-level {
    font-weight: 600;
    color: var(--primary);
    margin-right: var(--space-sm);
}

/* ===== AQS CALCULATOR ===== */
.calculator-layout {
    display: grid;
    grid-template-columns: 1.5fr 1fr;
    gap: var(--space-xl);
}

.calc-inputs {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.calc-section {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-md);
    border: 1px solid var(--border);
}

.calc-section h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-md);
    color: var(--text-secondary);
}

.calc-input {
    display: grid;
    grid-template-columns: 1fr auto auto;
    align-items: center;
    gap: var(--space-md);
    margin-bottom: var(--space-sm);
}

.calc-input label {
    font-size: var(--font-size-sm);
}

.calc-input input[type="range"] {
    width: 120px;
    height: 6px;
    -webkit-appearance: none;
    background: var(--border);
    border-radius: 3px;
}

.calc-input input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    background: var(--primary);
    border-radius: 50%;
    cursor: pointer;
}

.calc-input span {
    font-size: var(--font-size-sm);
    font-weight: 500;
    min-width: 48px;
    text-align: right;
}

.input-hint {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    font-weight: 400;
    font-style: italic;
    text-align: left;
    min-width: auto;
    margin-top: var(--space-xs);
}

.calc-input.primary-feedback {
    background: rgba(13, 148, 136, 0.05);
    padding: var(--space-sm);
    border-radius: var(--radius-sm);
}

.badge {
    font-size: var(--font-size-xs);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    font-weight: 500;
}

.badge.required {
    background: var(--primary);
    color: white;
}

.feedback-options {
    display: flex;
    gap: var(--space-md);
    margin: var(--space-md) 0;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    cursor: pointer;
}

.checkbox-label input {
    width: 16px;
    height: 16px;
}

.calc-input.optional {
    opacity: 0.8;
}

.calc-input.hidden {
    display: none;
}

.calc-result {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-lg);
}

.aqs-gauge {
    position: relative;
    width: 180px;
    height: 180px;
}

.aqs-gauge svg {
    width: 100%;
    height: 100%;
}

.aqs-value {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.aqs-value span:first-child {
    display: block;
    font-size: 48px;
    font-weight: 700;
    color: var(--primary);
    line-height: 1;
}

.aqs-label {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
}

.aqs-breakdown-bar {
    width: 100%;
}

.breakdown-row {
    display: flex;
    height: 12px;
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: var(--space-sm);
}

.bar-segment {
    height: 100%;
}

.bar-segment.accuracy { background: var(--accuracy-color); }
.bar-segment.delivery { background: var(--delivery-color); }
.bar-segment.professionalism { background: var(--prof-color); }

.breakdown-legend {
    display: flex;
    justify-content: center;
    gap: var(--space-md);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: var(--space-xs);
}

.dot.accuracy { background: var(--accuracy-color); }
.dot.delivery { background: var(--delivery-color); }
.dot.professionalism { background: var(--prof-color); }

/* ===== SIMULATOR ===== */
.simulator-layout {
    display: grid;
    grid-template-columns: 300px 1fr 300px;
    gap: var(--space-lg);
}

.sim-profile-panel,
.sim-projects-panel,
.sim-results-panel {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.sim-profile-panel h3,
.sim-projects-panel h3,
.sim-results-panel h3 {
    font-size: var(--font-size-base);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.sim-profile-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    align-items: center;
}

.sim-avatar {
    width: 64px;
    height: 64px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xl);
    font-weight: 600;
}

.sim-fields {
    width: 100%;
}

.form-row {
    margin-bottom: var(--space-sm);
}

.form-row label {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-bottom: var(--space-xs);
}

.form-input,
.form-select {
    width: 100%;
    padding: var(--space-sm);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
    background: var(--surface);
}

.form-input:focus,
.form-select:focus {
    outline: none;
    border-color: var(--primary);
}

.form-input-small {
    width: 80px;
    padding: var(--space-xs) var(--space-sm);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
}

.sim-hours {
    margin-top: var(--space-md);
    padding-top: var(--space-md);
    border-top: 1px solid var(--border);
}

.sim-hours h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.hours-inputs {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.hours-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: var(--font-size-sm);
}

.hours-total {
    margin-top: var(--space-sm);
    padding-top: var(--space-sm);
    border-top: 1px solid var(--border);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-md);
}

.sim-project-list {
    max-height: 300px;
    overflow-y: auto;
    margin-bottom: var(--space-md);
}

.sim-project-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-sm);
    border-bottom: 1px solid var(--border);
    font-size: var(--font-size-sm);
}

.project-status {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.project-status.pass { background: var(--success); }
.project-status.partial { background: var(--warning); }
.project-status.fail { background: var(--danger); }

.project-info {
    flex: 1;
}

.project-name {
    font-weight: 500;
}

.project-category {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.project-meta {
    display: flex;
    gap: var(--space-sm);
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.gate-pass { color: var(--success); }
.gate-fail { color: var(--danger); }

.project-summary {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-sm);
}

.summary-stat {
    text-align: center;
    padding: var(--space-sm);
    background: var(--background);
    border-radius: var(--radius-sm);
}

.summary-stat .stat-value {
    display: block;
    font-size: var(--font-size-md);
    font-weight: 700;
    color: var(--primary);
}

.summary-stat .stat-label {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.results-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.result-card {
    text-align: center;
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
}

.result-label {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-bottom: var(--space-xs);
}

.result-value {
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--primary);
}

.promo-progress {
    margin-bottom: var(--space-md);
}

.promo-header {
    display: flex;
    justify-content: space-between;
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-sm);
}

.promo-bar {
    height: 8px;
    background: var(--border);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: var(--space-sm);
}

.promo-fill {
    height: 100%;
    background: var(--primary);
    border-radius: 4px;
    transition: width 0.3s ease;
}

.promo-requirements {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.promo-req {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--font-size-sm);
}

.promo-req.met { color: var(--success); }
.promo-req.unmet { color: var(--text-muted); }

.promo-req-icon {
    font-size: var(--font-size-base);
}

.sim-flags {
    margin-bottom: var(--space-md);
    padding: var(--space-md);
    background: rgba(239, 68, 68, 0.1);
    border-radius: var(--radius);
}

.sim-flags.hidden {
    display: none;
}

.sim-flags h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--danger);
    margin-bottom: var(--space-sm);
}

.sim-flag-item {
    display: flex;
    gap: var(--space-sm);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
}

/* ===== BUTTONS ===== */
.btn-primary,
.btn-secondary {
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius);
    font-size: var(--font-size-sm);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--primary-dark);
}

.btn-secondary {
    background: var(--surface);
    color: var(--text-primary);
    border: 1px solid var(--border);
}

.btn-secondary:hover {
    background: var(--background);
}

.btn-small {
    padding: var(--space-xs) var(--space-sm);
    font-size: var(--font-size-xs);
}

/* ===== STAFFING VIEW ===== */
.staffing-layout {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: var(--space-xl);
}

.staffing-filters {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    height: fit-content;
}

.staffing-filters h3 {
    font-size: var(--font-size-base);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.filter-group {
    margin-bottom: var(--space-md);
}

.filter-group label {
    display: block;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
}

.staffing-results h3 {
    font-size: var(--font-size-base);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.analyst-matches {
    display: grid;
    gap: var(--space-md);
}

.match-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.match-card.excellent { }
.match-card.good { }
.match-card.partial { }

.match-indicator {
    font-size: var(--font-size-xs);
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: var(--space-sm);
}

.match-card.excellent .match-indicator { color: var(--success); }
.match-card.good .match-indicator { color: var(--primary); }
.match-card.partial .match-indicator { color: var(--warning); }

.match-profile {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    margin-bottom: var(--space-md);
}

.match-avatar {
    width: 48px;
    height: 48px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
}

.match-name {
    font-weight: 600;
    font-size: var(--font-size-base);
}

.match-level {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.match-details {
    display: flex;
    gap: var(--space-lg);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.btn-assign {
    margin-top: var(--space-md);
    width: 100%;
}

/* ===== CLIENT VIEW - BASEBALL CARD ===== */

/* Profile Header */
.baseball-card-header {
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    padding: var(--space-xl) var(--space-2xl);
    margin: calc(-1 * var(--space-xl)) calc(-1 * var(--space-xl)) var(--space-xl) calc(-1 * var(--space-xl));
}

.profile-hero {
    display: flex;
    align-items: flex-start;
    gap: var(--space-xl);
    max-width: 1200px;
    margin: 0 auto;
}

.profile-photo {
    flex-shrink: 0;
}

.profile-photo img {
    width: 120px;
    height: 120px;
    border-radius: var(--radius-lg);
    object-fit: cover;
}

.profile-hero-info {
    flex: 1;
}

.name-row {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-xs);
}

.name-row h1 {
    font-size: var(--font-size-2xl);
    font-weight: 600;
}

.verified-badge {
    width: 22px;
    height: 22px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
}

.profile-title {
    font-size: var(--font-size-md);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.skill-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.skill-tag {
    padding: var(--space-xs) var(--space-sm);
    background: var(--background);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.profile-meta {
    display: flex;
    align-items: center;
    gap: var(--space-lg);
    font-size: var(--font-size-sm);
}

.location {
    color: var(--text-secondary);
}

.availability {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
}

.availability.available {
    color: var(--success);
}

.hire-cta {
    flex-shrink: 0;
}

.btn-hire {
    padding: var(--space-sm) var(--space-lg);
    background: var(--primary);
    color: white;
    border: none;
    border-radius: var(--radius);
    font-size: var(--font-size-sm);
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
}

.btn-hire:hover {
    background: var(--primary-dark);
}

/* Main Content */
.baseball-card-content {
    max-width: 1200px;
    margin: 0 auto;
}

/* About & Assessment Row */
.about-assessment-row {
    display: grid;
    grid-template-columns: 1fr 400px;
    gap: var(--space-2xl);
    margin-bottom: var(--space-2xl);
    padding-bottom: var(--space-2xl);
    border-bottom: 1px solid var(--border);
}

.about-column h2 {
    font-size: var(--font-size-xl);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.bio {
    font-size: var(--font-size-base);
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: var(--space-lg);
}

.past-experience {
    margin-bottom: var(--space-lg);
}

.past-experience h4,
.highlights h4,
.expertise-section h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: var(--space-sm);
}

.company-logos {
    display: flex;
    gap: var(--space-md);
}

.company-logo {
    padding: var(--space-sm) var(--space-md);
    background: var(--background);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-secondary);
}

.highlights {
    margin-bottom: var(--space-lg);
}

.highlights ul {
    list-style: none;
}

.highlights li {
    position: relative;
    padding-left: var(--space-md);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: var(--space-sm);
}

.highlights li::before {
    content: "•";
    position: absolute;
    left: 0;
    color: var(--primary);
}

.expertise-section {
    margin-bottom: var(--space-md);
}

.expertise-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    margin-bottom: var(--space-sm);
}

.expertise-tag {
    padding: var(--space-xs) var(--space-sm);
    background: var(--background);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
    color: var(--text-primary);
}

.show-all-link {
    font-size: var(--font-size-sm);
    color: var(--primary);
    text-decoration: underline;
}

/* Assessment Column */
.assessment-column {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
}

.prism-assessment-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
}

.prism-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-sm);
}

.verified-label {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.prism-icon {
    color: var(--primary);
    font-size: var(--font-size-lg);
}

.prism-assessment-card h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-lg);
}

.radar-chart {
    position: relative;
    width: 100%;
    aspect-ratio: 1;
    max-width: 280px;
    margin: 0 auto;
}

.radar-svg {
    width: 100%;
    height: 100%;
}

.radar-labels {
    position: absolute;
    inset: 0;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.radar-label {
    position: absolute;
    white-space: nowrap;
}

.radar-label.top {
    top: 0;
    left: 50%;
    transform: translateX(-50%);
}

.radar-label.right {
    top: 30%;
    right: 0;
}

.radar-label.bottom-right {
    bottom: 15%;
    right: 5%;
}

.radar-label.bottom-left {
    bottom: 15%;
    left: 5%;
}

.radar-label.left {
    top: 30%;
    left: 0;
}

/* Percentile Card */
.percentile-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
}

.percentile-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-xs);
}

.percentile-header span:first-child {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.percentile-icon {
    color: var(--primary);
}

.percentile-value {
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.percentile-bar {
    margin-top: var(--space-md);
}

.percentile-track {
    position: relative;
    height: 8px;
    background: linear-gradient(to right, #EF4444, #F59E0B, #10B981);
    border-radius: 4px;
    margin-bottom: var(--space-sm);
}

.percentile-fill {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    background: transparent;
}

.percentile-marker {
    position: absolute;
    top: -8px;
    transform: translateX(-50%);
}

.marker-value {
    display: block;
    width: 28px;
    height: 28px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    font-size: var(--font-size-xs);
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow);
}

.percentile-labels {
    display: flex;
    justify-content: space-between;
    font-size: 10px;
    color: var(--text-muted);
}

/* Skills Section */
.skills-section {
    margin-bottom: var(--space-2xl);
    padding-bottom: var(--space-2xl);
    border-bottom: 1px solid var(--border);
}

.skills-section h2 {
    font-size: var(--font-size-xl);
    font-weight: 600;
    margin-bottom: var(--space-lg);
}

.skills-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-lg) var(--space-2xl);
}

.skill-category h4 {
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: var(--text-muted);
    margin-bottom: var(--space-sm);
}

.skill-pills {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
}

.skill-pill {
    padding: var(--space-xs) var(--space-sm);
    background: var(--background);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
    color: var(--text-primary);
}

.tool-ratings {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-md);
}

.tool-item {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    font-size: var(--font-size-sm);
}

.tool-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.tool-dot.expert {
    background: var(--primary);
}

.tool-dot.proficient {
    background: var(--primary-light);
}

.tool-dot.familiar {
    background: var(--border-dark);
}

/* Work Samples Section */
.work-samples-section {
    margin-bottom: var(--space-2xl);
    padding-bottom: var(--space-2xl);
    border-bottom: 1px solid var(--border);
}

.section-header-centered {
    text-align: center;
    margin-bottom: var(--space-xl);
}

.section-header-centered h2 {
    font-size: var(--font-size-xl);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.section-header-centered p {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
}

.samples-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
}

.sample-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.sample-preview {
    background: linear-gradient(135deg, #E0F2F1 0%, #B2DFDB 100%);
    height: 160px;
}

.sample-placeholder {
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(255,255,255,0.1) 10px,
        rgba(255,255,255,0.1) 20px
    );
}

.sample-card h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    padding: var(--space-md) var(--space-md) var(--space-sm);
}

.sample-features {
    list-style: none;
    padding: 0 var(--space-md);
    margin-bottom: var(--space-md);
}

.sample-features li {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    padding-left: var(--space-md);
    position: relative;
    margin-bottom: var(--space-xs);
}

.sample-features li::before {
    content: "●";
    position: absolute;
    left: 0;
    color: var(--primary);
    font-size: 8px;
    top: 5px;
}

.btn-view-sample {
    display: block;
    width: calc(100% - var(--space-md) * 2);
    margin: 0 var(--space-md) var(--space-md);
    padding: var(--space-sm);
    background: var(--background);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    font-size: var(--font-size-sm);
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.2s;
}

.btn-view-sample:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

/* Case Studies Section */
.case-studies-section {
    margin-bottom: var(--space-2xl);
    padding-bottom: var(--space-2xl);
    border-bottom: 1px solid var(--border);
}

.case-study-card {
    display: grid;
    grid-template-columns: 1fr 1fr;
    background: var(--background);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.case-study-content {
    padding: var(--space-xl);
}

.case-company {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    margin-bottom: var(--space-md);
}

.company-icon {
    color: var(--primary);
}

.case-study-content h3 {
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.case-study-content p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: var(--space-sm);
}

.btn-case-study {
    display: inline-block;
    margin-top: var(--space-md);
    padding: var(--space-sm) var(--space-md);
    background: var(--primary);
    color: white;
    border: none;
    border-radius: var(--radius);
    font-size: var(--font-size-sm);
    font-weight: 500;
    cursor: pointer;
    transition: background 0.2s;
}

.btn-case-study:hover {
    background: var(--primary-dark);
}

.case-study-metrics {
    padding: var(--space-xl);
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: var(--space-xl);
}

.case-study-metrics .metric {
    display: flex;
    flex-direction: column;
}

.case-study-metrics .metric-value {
    font-size: 48px;
    font-weight: 700;
    color: var(--primary);
    line-height: 1;
    margin-bottom: var(--space-xs);
}

.case-study-metrics .metric-label {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-xs);
}

.case-study-metrics .metric-detail {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

/* Client Feedback Section */
.client-feedback-section h2 {
    font-size: var(--font-size-xl);
    font-weight: 600;
    margin-bottom: var(--space-lg);
}

.feedback-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
}

.feedback-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
}

.feedback-quote {
    font-size: var(--font-size-sm);
    color: var(--text-primary);
    line-height: 1.6;
    margin-bottom: var(--space-md);
}

.feedback-author {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.author-avatar {
    width: 32px;
    height: 32px;
    background: var(--background);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-sm);
}

.author-name {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

/* ===== TIER OVERVIEW ===== */
.tier-overview-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
    margin-bottom: var(--space-2xl);
}

.tier-overview-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    border-top: 4px solid var(--primary);
}

.tier-overview-card.tier1 { border-top-color: var(--level-a2); }
.tier-overview-card.tier2 { border-top-color: var(--level-a3); }
.tier-overview-card.tier3 { border-top-color: var(--level-a4); }

.tier-header {
    margin-bottom: var(--space-md);
}

.tier-badge {
    display: inline-block;
    padding: var(--space-xs) var(--space-sm);
    background: var(--background);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
}

.tier-header h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
}

.tier-desc {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.tier-list {
    list-style: none;
    margin-bottom: var(--space-md);
}

.tier-list li {
    padding-left: var(--space-md);
    position: relative;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
}

.tier-list li::before {
    content: "•";
    position: absolute;
    left: 0;
    color: var(--primary);
}

.tier-purpose {
    padding-top: var(--space-md);
    border-top: 1px solid var(--border);
}

.purpose-label {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--space-xs);
}

.purpose-text {
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: var(--primary);
}

/* Mastery Levels Overview */
.mastery-levels-overview {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.mastery-levels-overview h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.mastery-levels-overview > p {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-lg);
}

.mastery-levels-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-md);
}

.mastery-level-card {
    padding: var(--space-md);
    border-radius: var(--radius);
    border: 1px solid var(--border);
}

.mastery-level-card.foundation {
    background: rgba(100, 116, 139, 0.1);
}
.mastery-level-card.proficient {
    background: rgba(13, 148, 136, 0.1);
}
.mastery-level-card.advanced {
    background: rgba(15, 118, 110, 0.1);
}
.mastery-level-card.expert {
    background: rgba(19, 78, 74, 0.1);
}

.mastery-badge {
    display: inline-block;
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.mastery-level-card.foundation .mastery-badge { color: var(--level-a1); }
.mastery-level-card.proficient .mastery-badge { color: var(--level-a2); }
.mastery-level-card.advanced .mastery-badge { color: var(--level-a3); }
.mastery-level-card.expert .mastery-badge { color: var(--level-a4); }

.mastery-level-card p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    line-height: 1.5;
}

/* ===== COMPETENCIES ACCORDION ===== */
.competencies-accordion {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.competency-accordion-item {
    background: var(--surface);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border);
    overflow: hidden;
}

.competency-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-lg);
    cursor: pointer;
    transition: background 0.2s;
}

.competency-header:hover {
    background: var(--background);
}

.competency-header-left {
    display: flex;
    align-items: flex-start;
    gap: var(--space-md);
}

.competency-icon {
    font-size: var(--font-size-2xl);
}

.competency-title-group h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.competency-definition {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    max-width: 600px;
}

.accordion-arrow {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    transition: transform 0.2s;
}

.competency-accordion-item.expanded .accordion-arrow {
    transform: rotate(180deg);
}

.competency-body {
    display: none;
    padding: 0 var(--space-lg) var(--space-lg);
    border-top: 1px solid var(--border);
}

.competency-accordion-item.expanded .competency-body {
    display: block;
}

.competency-core-skills {
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-lg);
}

.domains-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.domain-card {
    background: var(--background);
    border-radius: var(--radius);
    padding: var(--space-md);
}

.domain-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-sm);
}

.domain-key {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    font-size: var(--font-size-xs);
    font-weight: 600;
}

.domain-name {
    font-size: var(--font-size-sm);
    font-weight: 600;
}

.domain-skills {
    list-style: none;
}

.domain-skills li {
    padding-left: var(--space-md);
    position: relative;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
}

.domain-skills li::before {
    content: "→";
    position: absolute;
    left: 0;
    color: var(--primary);
    font-size: var(--font-size-xs);
}

.mastery-progression h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.mastery-levels-row {
    display: flex;
    gap: var(--space-sm);
}

.mastery-level-mini {
    flex: 1;
    padding: var(--space-sm);
    border-radius: var(--radius-sm);
    text-align: center;
}

.mastery-level-mini.foundation { background: rgba(100, 116, 139, 0.1); }
.mastery-level-mini.proficient { background: rgba(13, 148, 136, 0.1); }
.mastery-level-mini.advanced { background: rgba(15, 118, 110, 0.1); }
.mastery-level-mini.expert { background: rgba(19, 78, 74, 0.1); }

.mastery-level-mini .level-name {
    display: block;
    font-size: var(--font-size-xs);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.mastery-level-mini .level-desc {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

/* Cross Competency Links */
.cross-competency-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.cross-competency-section h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-lg);
}

.cross-links-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-md);
}

.cross-link {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
    flex-wrap: wrap;
}

.link-from, .link-to {
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: var(--primary);
}

.link-arrow {
    color: var(--text-muted);
}

.link-desc {
    flex-basis: 100%;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-top: var(--space-xs);
}

/* ===== SPECIALIZATIONS GRID ===== */
.specializations-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: var(--space-md);
}

.specialization-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border);
    overflow: hidden;
}

.spec-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-md);
    cursor: pointer;
    transition: background 0.2s;
}

.spec-header:hover {
    background: var(--background);
}

.spec-header h4 {
    font-size: var(--font-size-base);
    font-weight: 600;
}

.spec-toggle {
    font-size: var(--font-size-lg);
    color: var(--text-muted);
    font-weight: 300;
}

.spec-definition {
    padding: 0 var(--space-md);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.spec-deliverables {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-xs);
    padding: 0 var(--space-md) var(--space-md);
}

.deliverable-tag {
    padding: var(--space-xs) var(--space-sm);
    background: var(--background);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.spec-body {
    display: none;
    padding: var(--space-md);
    border-top: 1px solid var(--border);
    background: var(--background);
}

.specialization-card.expanded .spec-body {
    display: block;
}

.spec-section {
    margin-bottom: var(--space-md);
}

.spec-section:last-child {
    margin-bottom: 0;
}

.spec-section h5 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-sm);
    color: var(--primary);
}

.spec-section p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.skill-group-item {
    margin-bottom: var(--space-sm);
}

.skill-group-item strong {
    font-size: var(--font-size-sm);
    display: block;
    margin-bottom: var(--space-xs);
}

.skill-group-item ul {
    list-style: none;
    padding-left: var(--space-md);
}

.skill-group-item li {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    position: relative;
    padding-left: var(--space-sm);
}

.skill-group-item li::before {
    content: "•";
    position: absolute;
    left: 0;
    color: var(--primary);
}

/* ===== TOOLS SECTION ===== */
.tool-proficiency-levels {
    display: flex;
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.tool-level {
    flex: 1;
    padding: var(--space-md);
    background: var(--surface);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    text-align: center;
}

.tool-level.basic { border-top: 3px solid var(--level-a1); }
.tool-level.intermediate { border-top: 3px solid var(--level-a2); }
.tool-level.advanced { border-top: 3px solid var(--level-a3); }

.tool-level-badge {
    display: block;
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.tool-level.basic .tool-level-badge { color: var(--level-a1); }
.tool-level.intermediate .tool-level-badge { color: var(--level-a2); }
.tool-level.advanced .tool-level-badge { color: var(--level-a3); }

.tool-level-desc {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.tools-categories {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.tool-category {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.tool-category-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.tool-category-icon {
    font-size: var(--font-size-xl);
}

.tool-category-header h4 {
    font-size: var(--font-size-base);
    font-weight: 600;
}

.tools-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.tool-item {
    padding: var(--space-sm);
    background: var(--background);
    border-radius: var(--radius-sm);
}

.tool-name {
    display: block;
    font-size: var(--font-size-sm);
    font-weight: 500;
    margin-bottom: var(--space-xs);
}

.tool-items {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.ai-integration-callout {
    background: rgba(13, 148, 136, 0.05);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
}

.callout-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-sm);
}

.callout-icon {
    font-size: var(--font-size-xl);
}

.callout-header h4 {
    font-size: var(--font-size-base);
    font-weight: 600;
}

.ai-integration-callout p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    line-height: 1.6;
}

/* ===== ASSESSMENT FRAMEWORK ===== */
.assessment-framework-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.framework-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.framework-card-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.framework-icon {
    font-size: var(--font-size-lg);
}

.framework-card-header h4 {
    font-size: var(--font-size-base);
    font-weight: 600;
}

.framework-list {
    list-style: none;
}

.framework-list li {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
    line-height: 1.5;
}

.framework-list li strong {
    color: var(--text-primary);
}

.credentialing-section h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.credentials-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-md);
}

.credential-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.credential-card.internal { border-top: 3px solid var(--primary); }
.credential-card.client { border-top: 3px solid var(--cert-expert); }
.credential-card.industry { border-top: 3px solid var(--delivery-color); }

.credential-badge {
    display: inline-block;
    padding: var(--space-xs) var(--space-sm);
    background: var(--background);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
}

.credential-card h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.credential-card ul {
    list-style: none;
}

.credential-card li {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    padding-left: var(--space-md);
    position: relative;
    margin-bottom: var(--space-xs);
}

.credential-card li::before {
    content: "•";
    position: absolute;
    left: 0;
    color: var(--primary);
}

/* ===== PROGRESSION TABS ===== */
.progression-tabs {
    display: flex;
    gap: var(--space-xs);
    margin-bottom: var(--space-lg);
    border-bottom: 1px solid var(--border);
    padding-bottom: var(--space-sm);
}

.progression-tab {
    padding: var(--space-sm) var(--space-md);
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    font-size: var(--font-size-base);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.progression-tab:hover {
    color: var(--text-primary);
}

.progression-tab.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
    font-weight: 500;
}

.progression-panel {
    display: none;
}

.progression-panel.active {
    display: block;
}

.training-section {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

/* Expertise Cards for Client View */
.expertise-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.expertise-card.expert { }
.expertise-card.proficient { }
.expertise-card.familiar { }

.expertise-card-header {
    margin-bottom: var(--space-sm);
}

.expertise-badge {
    display: inline-block;
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
}

.expertise-badge.expert { background: rgba(245, 158, 11, 0.15); color: #B45309; }
.expertise-badge.proficient { background: rgba(13, 148, 136, 0.15); color: var(--primary-dark); }
.expertise-badge.familiar { background: var(--background); color: var(--text-secondary); }

.expertise-card h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.expertise-card p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.expertise-cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-md);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 1200px) {
    .simulator-layout {
        grid-template-columns: 1fr 1fr;
    }

    .sim-results-panel {
        grid-column: 1 / -1;
    }

    .calculator-layout {
        grid-template-columns: 1fr;
    }

    .tier-overview-grid {
        grid-template-columns: 1fr;
    }

    .mastery-levels-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .credentials-grid {
        grid-template-columns: 1fr;
    }

    .assessment-framework-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 900px) {
    .mobile-menu-btn {
        display: flex;
    }

    .nav-tabs {
        display: none;
        position: absolute;
        top: 60px;
        left: 0;
        right: 0;
        background: var(--surface);
        flex-direction: column;
        padding: var(--space-md);
        border-bottom: 1px solid var(--border);
        box-shadow: var(--shadow-lg);
    }

    .nav-tabs.open {
        display: flex;
    }

    .nav-tab {
        justify-content: flex-start;
        padding: var(--space-md);
    }

    .main-content {
        padding: var(--space-md);
    }

    .assessment-layout {
        grid-template-columns: 1fr;
    }

    .staffing-layout {
        grid-template-columns: 1fr;
    }

    .simulator-layout {
        grid-template-columns: 1fr;
    }

    .profile-header {
        flex-direction: column;
        text-align: center;
    }

    .profile-stats {
        width: 100%;
        justify-content: center;
    }

    .approach-cards,
    .feedback-quotes {
        grid-template-columns: 1fr;
    }

    .cert-levels-overview {
        grid-template-columns: 1fr;
    }

    .gates-grid {
        grid-template-columns: 1fr;
    }

    .timeline-item {
        padding-left: 50px;
    }

    .timeline-marker {
        width: 36px;
        height: 36px;
        font-size: var(--font-size-sm);
    }

    .timeline-track {
        left: 16px;
    }

    .transition-arrow {
        left: 14px;
    }
}

@media (max-width: 600px) {
    .levels-grid {
        grid-template-columns: 1fr;
    }

    .traits-grid {
        grid-template-columns: 1fr;
    }

    .training-grid {
        grid-template-columns: 1fr;
    }

    .calc-input {
        grid-template-columns: 1fr;
        gap: var(--space-sm);
    }

    .calc-input input[type="range"] {
        width: 100%;
    }

    .results-grid {
        grid-template-columns: 1fr;
    }

    .project-summary {
        grid-template-columns: repeat(2, 1fr);
    }

    .mastery-levels-grid {
        grid-template-columns: 1fr;
    }

    .mastery-levels-row {
        flex-direction: column;
    }

    .tool-proficiency-levels {
        flex-direction: column;
    }

    .tools-categories {
        grid-template-columns: 1fr;
    }

    .specializations-grid {
        grid-template-columns: 1fr;
    }

    .domains-grid {
        grid-template-columns: 1fr;
    }

    .cross-links-grid {
        grid-template-columns: 1fr;
    }
}

/* ===== OVERVIEW PAGE ===== */
.overview-hero {
    text-align: center;
    padding: var(--space-2xl) var(--space-lg);
    margin-bottom: var(--space-2xl);
    background: linear-gradient(135deg, var(--background) 0%, #e0f2f1 100%);
    border-radius: var(--radius-lg);
}

.overview-hero h1 {
    font-size: var(--font-size-2xl);
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--space-sm);
}

.hero-subtitle {
    font-size: var(--font-size-md);
    color: var(--text-secondary);
    max-width: 700px;
    margin: 0 auto;
}

.overview-section {
    margin-bottom: var(--space-2xl);
}

.overview-section h2 {
    font-size: var(--font-size-xl);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.section-intro {
    color: var(--text-secondary);
    margin-bottom: var(--space-lg);
    max-width: 700px;
}

.section-header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-sm);
}

.section-link {
    font-size: var(--font-size-sm);
    color: var(--primary);
    text-decoration: none;
}

.section-link:hover {
    text-decoration: underline;
}

/* Deck-style slides */
.deck-slide {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-xl);
    border: 1px solid var(--border);
    margin-bottom: var(--space-xl);
}

.deck-slide.final-slide {
    background: linear-gradient(135deg, var(--surface) 0%, #f0f9ff 100%);
}

.slide-label {
    display: inline-block;
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--primary);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: var(--space-xs);
}

/* Problem cards */
.problem-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
}

.problem-card {
    padding: var(--space-lg);
    background: var(--background);
    border-radius: var(--radius);
}

.problem-icon {
    font-size: 2rem;
    margin-bottom: var(--space-sm);
}

.problem-card h3 {
    margin-bottom: var(--space-sm);
}

.problem-card p {
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
}

.problem-pain {
    display: block;
    font-size: var(--font-size-sm);
    color: var(--warning);
    font-style: italic;
}

/* Solution cards */
.solution-grid {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
}

.solution-card {
    display: flex;
    gap: var(--space-lg);
    padding: var(--space-lg);
    background: var(--background);
    border-radius: var(--radius);
}

.solution-number {
    width: 48px;
    height: 48px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xl);
    font-weight: 700;
    flex-shrink: 0;
}

.solution-content h3 {
    margin-bottom: var(--space-xs);
}

.solution-content p {
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
}

.solution-insight {
    padding: var(--space-sm) var(--space-md);
    background: color-mix(in srgb, var(--primary) 10%, transparent);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
}

.insight-label {
    font-weight: 600;
    color: var(--primary);
}

/* Design decisions */
.design-decision {
    margin-top: var(--space-lg);
    padding: var(--space-lg);
    background: var(--background);
    border-radius: var(--radius);
    border-left: 3px solid var(--primary);
}

.design-decision h4 {
    color: var(--primary);
    margin-bottom: var(--space-sm);
}

.design-decision p {
    margin-bottom: var(--space-sm);
}

.design-decision ul {
    margin: var(--space-sm) 0;
    padding-left: var(--space-lg);
}

.design-decision li {
    margin-bottom: var(--space-xs);
}

.decision-rationale {
    display: block;
    margin-top: var(--space-sm);
    padding-top: var(--space-sm);
    border-top: 1px solid var(--border);
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    font-style: italic;
}

.design-decisions-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-md);
}

.design-decisions-group .design-decision {
    margin-top: var(--space-md);
}

/* AQS breakdown visual */
.aqs-breakdown-visual {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.aqs-component {
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
    text-align: center;
}

.aqs-weight {
    display: block;
    font-size: var(--font-size-xl);
    font-weight: 700;
    color: var(--primary);
    margin-bottom: var(--space-xs);
}

.aqs-detail strong {
    display: block;
    margin-bottom: var(--space-xs);
}

.aqs-detail span {
    display: block;
    font-size: var(--font-size-sm);
    color: var(--text-muted);
}

.source-tag {
    display: inline-block;
    margin-top: var(--space-xs);
    padding: 2px 8px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
}

/* Practice example */
.practice-example {
    background: var(--background);
    border-radius: var(--radius);
    padding: var(--space-lg);
    margin-bottom: var(--space-lg);
}

.practice-example h4 {
    margin-bottom: var(--space-md);
}

.practice-flow {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    overflow-x: auto;
}

.practice-step {
    flex: 1;
    min-width: 120px;
    padding: var(--space-sm);
    background: var(--surface);
    border-radius: var(--radius);
    text-align: center;
}

.practice-num {
    display: block;
    width: 24px;
    height: 24px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    font-size: var(--font-size-sm);
    font-weight: 600;
    line-height: 24px;
    margin: 0 auto var(--space-xs);
}

.practice-content strong {
    display: block;
    font-size: var(--font-size-sm);
    margin-bottom: 2px;
}

.practice-content p {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin: 0;
}

/* Career path compact */
.career-path-compact h4 {
    margin-bottom: var(--space-md);
}

.progression-visual {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    overflow-x: auto;
    padding: var(--space-sm) 0;
}

.prog-stage {
    flex: 1;
    min-width: 140px;
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
    text-align: center;
}

.prog-level {
    display: block;
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--primary);
}

.prog-specs {
    display: block;
    font-size: var(--font-size-sm);
    font-weight: 500;
    margin: var(--space-xs) 0;
}

.prog-work {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.prog-arrow {
    color: var(--text-muted);
    font-size: var(--font-size-lg);
    flex-shrink: 0;
}

/* Upskilling grid */
.upskilling-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.upskill-category {
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
}

.upskill-category h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--primary);
    margin-bottom: var(--space-sm);
}

.upskill-category ul {
    list-style: none;
    font-size: var(--font-size-sm);
}

.upskill-category li {
    padding: var(--space-xs) 0;
    color: var(--text-secondary);
    position: relative;
    padding-left: var(--space-md);
}

.upskill-category li::before {
    content: "→";
    position: absolute;
    left: 0;
    color: var(--text-muted);
}

.upskill-note {
    padding: var(--space-md);
    background: color-mix(in srgb, var(--primary) 10%, transparent);
    border-radius: var(--radius);
    font-size: var(--font-size-sm);
}

.upskill-note strong {
    color: var(--primary);
}

@media (max-width: 768px) {
    .upskilling-grid {
        grid-template-columns: 1fr;
    }
}

/* Psychometrics compact */
.psycho-intro {
    margin-bottom: var(--space-lg);
    color: var(--text-secondary);
}

.psycho-compact {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-xl);
    margin-bottom: var(--space-lg);
}

.psycho-dims-compact {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-sm);
}

.dim-compact {
    padding: var(--space-sm);
    background: var(--background);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
}

.psycho-profiles h4 {
    margin-bottom: var(--space-sm);
    font-size: var(--font-size-sm);
    color: var(--text-muted);
}

.profile-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-xs);
}

.profile-tag {
    padding: var(--space-xs) var(--space-sm);
    background: var(--background);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
}

/* Workflow compact */
.workflow-compact {
    display: flex;
    align-items: flex-start;
    gap: var(--space-xs);
    margin-bottom: var(--space-lg);
    overflow-x: auto;
    padding: var(--space-sm) 0;
}

.workflow-step-compact {
    flex: 1;
    min-width: 100px;
    padding: var(--space-sm);
    background: var(--background);
    border-radius: var(--radius);
    text-align: center;
}

.workflow-step-compact.highlight {
    background: color-mix(in srgb, var(--primary) 15%, transparent);
    border: 1px solid var(--primary);
}

.wf-num {
    display: block;
    width: 20px;
    height: 20px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    font-size: var(--font-size-xs);
    font-weight: 600;
    line-height: 20px;
    margin: 0 auto var(--space-xs);
}

.workflow-step-compact strong {
    display: block;
    font-size: var(--font-size-sm);
}

.workflow-step-compact span {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.workflow-arrow-compact {
    color: var(--text-muted);
    flex-shrink: 0;
    padding-top: var(--space-md);
}

/* Dimensions summary */
.dimensions-summary h4 {
    margin-bottom: var(--space-md);
}

.dims-two-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-lg);
}

.dims-col {
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
}

.dims-col h5 {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    margin-bottom: var(--space-sm);
}

.dims-col ul {
    list-style: none;
    font-size: var(--font-size-sm);
}

.dims-col li {
    padding: var(--space-xs) 0;
    border-bottom: 1px solid var(--border);
}

.dims-col li:last-child {
    border-bottom: none;
}

/* Summary table */
.summary-table {
    margin-bottom: var(--space-lg);
}

.summary-row {
    display: grid;
    grid-template-columns: 1fr 1.5fr 1fr;
    gap: var(--space-md);
    padding: var(--space-sm) var(--space-md);
    border-bottom: 1px solid var(--border);
}

.summary-row.header {
    background: var(--background);
    font-weight: 600;
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    border-radius: var(--radius-sm) var(--radius-sm) 0 0;
}

.summary-row:last-child {
    border-bottom: none;
}

/* Key principles */
.key-principles h4 {
    margin-bottom: var(--space-md);
}

.principles-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md);
}

.principle {
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
}

.principle strong {
    display: block;
    color: var(--primary);
    margin-bottom: var(--space-xs);
}

.principle span {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

/* Responsive */
@media (max-width: 768px) {
    .problem-grid,
    .aqs-breakdown-visual,
    .design-decisions-group,
    .psycho-compact,
    .dims-two-col,
    .principles-grid {
        grid-template-columns: 1fr;
    }

    .practice-flow,
    .progression-visual,
    .workflow-compact {
        flex-direction: column;
    }

    .prog-arrow,
    .workflow-arrow-compact {
        transform: rotate(90deg);
    }

    .summary-row {
        grid-template-columns: 1fr;
        gap: var(--space-xs);
    }
}


/* Levels Summary */
.levels-summary-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-md);
}

.level-summary-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-md);
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.level-summary-card.level-a1 { }
.level-summary-card.level-a2 { }
.level-summary-card.level-a3 { }
.level-summary-card.level-a4 { }

.level-summary-card .level-badge {
    width: 36px;
    height: 36px;
    flex-shrink: 0;
    margin-bottom: 0;
    font-size: var(--font-size-sm);
}

.level-summary-card .level-info h3 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: 2px;
}

.level-summary-card .level-info p {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin: 0;
}

.level-aqs {
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--primary);
    margin-left: auto;
    white-space: nowrap;
}

/* Specs Summary */
.specs-summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: var(--space-sm);
    margin-bottom: var(--space-lg);
}

.spec-summary-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.spec-summary-card .spec-icon {
    font-size: var(--font-size-lg);
}

.spec-summary-card .spec-name {
    font-size: var(--font-size-sm);
    font-weight: 500;
}

/* Spec Score Explainer */
.spec-score-explainer {
    background: rgba(13, 148, 136, 0.05);
    border-radius: var(--radius);
    padding: var(--space-lg);
    margin-bottom: var(--space-lg);
}

.spec-score-explainer h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.spec-score-explainer p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.ss-formula {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    flex-wrap: wrap;
}

.ss-part {
    background: var(--surface);
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
}

.ss-plus {
    color: var(--text-muted);
    font-weight: 300;
    font-size: var(--font-size-lg);
}

/* Spec Tiers */
.spec-tiers {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-md);
}

.spec-tier-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-md);
    text-align: center;
    border: 1px solid var(--border);
}

.spec-tier-card.tier-familiar { border-top: 3px solid var(--level-a1); }
.spec-tier-card.tier-proficient { border-top: 3px solid var(--level-a2); }
.spec-tier-card.tier-expert { border-top: 3px solid var(--cert-expert); }

.tier-score {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-bottom: var(--space-xs);
}

.tier-name {
    display: block;
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.tier-desc {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

/* Progression Drivers */
.progression-drivers {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-md);
}

.driver-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.driver-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-sm);
}

.driver-icon {
    font-size: var(--font-size-xl);
}

.driver-header h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
}

.driver-card p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-sm);
}

.card-link {
    font-size: var(--font-size-sm);
    color: var(--primary);
    text-decoration: none;
}

.card-link:hover {
    text-decoration: underline;
}

/* Career Path */
.career-path-expectations {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    margin-bottom: var(--space-lg);
}

.career-path-expectations h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.level-expectations {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-md);
}

.expect-card {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    padding: var(--space-md);
    border-radius: var(--radius);
    background: var(--background);
}

.expect-card.level-a1 { }
.expect-card.level-a2 { }
.expect-card.level-a3 { }
.expect-card.level-a4 { }

.expect-level {
    font-size: var(--font-size-sm);
    font-weight: 700;
    color: var(--primary);
}

.expect-detail strong {
    display: block;
    font-size: var(--font-size-sm);
    margin-bottom: 2px;
}

.expect-note {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

/* Career Example */
.career-example {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.career-example h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-lg);
}

.career-timeline {
    position: relative;
    padding-left: var(--space-xl);
}

.career-timeline::before {
    content: '';
    position: absolute;
    left: 12px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--border);
}

.timeline-step {
    position: relative;
    padding-bottom: var(--space-lg);
}

.timeline-step:last-child {
    padding-bottom: 0;
}

.step-marker {
    position: absolute;
    left: calc(-1 * var(--space-xl) + 2px);
    width: 24px;
    height: 24px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xs);
    font-weight: 700;
}

.step-content strong {
    display: block;
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    margin-bottom: var(--space-xs);
}

.step-content p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin: 0 0 var(--space-xs);
}

/* Tools Overview */
.tools-overview {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-md);
}

.tool-category-summary {
    background: var(--surface);
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    font-size: var(--font-size-sm);
}

.tool-category-summary strong {
    color: var(--primary);
}

/* Quality Overview */
.quality-overview {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-md);
}

.quality-overview-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    display: flex;
    align-items: flex-start;
    gap: var(--space-md);
}

.quality-step-badge {
    width: 32px;
    height: 32px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-sm);
    flex-shrink: 0;
}

.quality-step-info h4 {
    font-size: var(--font-size-base);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.quality-step-info p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin: 0;
}

/* Review score in project list */
.review-score {
    font-weight: 600;
    color: var(--primary);
}

/* ===== ANALYST LEVELS DETAILED ===== */
.levels-detailed-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-lg);
    margin-bottom: var(--space-2xl);
}

.level-detailed-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border);
    overflow: hidden;
}

.level-detailed-card.level-a1 { border-top: 4px solid var(--level-a1); }
.level-detailed-card.level-a2 { border-top: 4px solid var(--level-a2); }
.level-detailed-card.level-a3 { border-top: 4px solid var(--level-a3); }
.level-detailed-card.level-a4 { border-top: 4px solid var(--level-a4); }

.level-card-header {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-lg);
    background: var(--background);
}

.level-badge-large {
    width: 56px;
    height: 56px;
    border-radius: var(--radius);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xl);
    font-weight: 700;
    color: white;
}

.level-a1 .level-badge-large { background: var(--level-a1); }
.level-a2 .level-badge-large { background: var(--level-a2); }
.level-a3 .level-badge-large { background: var(--level-a3); }
.level-a4 .level-badge-large { background: var(--level-a4); }

.level-card-header h2 {
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin-bottom: 2px;
}

.level-card-body {
    padding: var(--space-lg);
}

.level-description {
    margin-bottom: var(--space-lg);
}

.level-description h4,
.level-requirements h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: var(--space-sm);
}

.level-description ul {
    list-style: none;
}

.level-description li {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    padding-left: var(--space-md);
    position: relative;
    margin-bottom: var(--space-xs);
}

.level-description li::before {
    content: "•";
    position: absolute;
    left: 0;
    color: var(--primary);
}

.level-requirements {
    padding-top: var(--space-md);
    border-top: 1px solid var(--border);
}

.req-item {
    display: flex;
    justify-content: space-between;
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-xs);
}

.req-label {
    color: var(--text-secondary);
}

.req-value {
    font-weight: 600;
    color: var(--primary);
}

.level-promotion {
    padding: var(--space-md);
    background: rgba(13, 148, 136, 0.05);
    border-top: 1px solid var(--border);
}

.level-promotion h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--primary);
    margin-bottom: var(--space-sm);
}

.level-promotion ul {
    list-style: none;
}

.level-promotion li {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    padding-left: var(--space-md);
    position: relative;
    margin-bottom: var(--space-xs);
}

.level-promotion li::before {
    content: "→";
    position: absolute;
    left: 0;
    color: var(--primary);
}

/* ===== COMPETENCIES SECTION ===== */
.competencies-section {
    margin-top: var(--space-2xl);
}

.competencies-section h2 {
    font-size: var(--font-size-xl);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.competencies-section > p {
    color: var(--text-secondary);
    margin-bottom: var(--space-lg);
}

.competencies-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--space-md);
}

.competency-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.competency-card .competency-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-sm);
    padding: 0;
    cursor: default;
}

.competency-card .competency-header:hover {
    background: transparent;
}

.competency-card .competency-icon {
    font-size: var(--font-size-xl);
}

.competency-card h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
}

.competency-desc {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.competency-levels {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.comp-level {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.level-tag {
    font-size: var(--font-size-xs);
    font-weight: 600;
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    color: white;
    flex-shrink: 0;
}

.level-tag.a1 { background: var(--level-a1); }
.level-tag.a2 { background: var(--level-a2); }
.level-tag.a3 { background: var(--level-a3); }
.level-tag.a4 { background: var(--level-a4); }

/* ===== SPECIALIZATIONS DETAILED ===== */
.spec-score-legend {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    margin-bottom: var(--space-xl);
}

.legend-intro {
    margin-bottom: var(--space-lg);
}

.legend-intro p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.ss-tiers-legend {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-md);
}

.ss-tier {
    display: flex;
    align-items: flex-start;
    gap: var(--space-md);
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
}

.ss-badge {
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: white;
    white-space: nowrap;
}

.ss-badge.tier-familiar { background: var(--level-a1); }
.ss-badge.tier-proficient { background: var(--level-a2); }
.ss-badge.tier-expert { background: var(--cert-expert); }

.ss-tier-info strong {
    display: block;
    font-size: var(--font-size-sm);
    margin-bottom: 2px;
}

.ss-tier-info span {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.specializations-detailed-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
    gap: var(--space-md);
}

.spec-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.spec-card .spec-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-sm);
    padding: 0;
    cursor: default;
}

.spec-card .spec-header:hover {
    background: transparent;
}

.spec-card .spec-icon {
    font-size: var(--font-size-xl);
}

.spec-card h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
}

.spec-desc {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.spec-methods {
    margin-bottom: var(--space-md);
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
}

.spec-methods h4,
.spec-skills h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: var(--space-sm);
}

.spec-methods ul {
    list-style: none;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-xs);
}

.spec-methods li {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    padding-left: var(--space-sm);
    position: relative;
}

.spec-methods li::before {
    content: "→";
    position: absolute;
    left: 0;
    color: var(--primary);
}

.spec-skills {
    margin-bottom: var(--space-md);
}

.skills-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-xs);
}

.spec-skills .skill-tag {
    padding: var(--space-xs) var(--space-sm);
    background: var(--background);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

/* Skills Required (Underlying Skills Mapping) */
.spec-skills-required {
    margin-bottom: var(--space-md);
    padding: var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
}

.spec-skills-required h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: var(--space-sm);
}

.skills-mapping {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.skills-group {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
}

.skills-group-label {
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--text-muted);
    min-width: 60px;
    padding-top: 4px;
}

.skills-list {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-xs);
}

.underlying-skill {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    cursor: help;
}

.underlying-skill.primary {
    background: color-mix(in srgb, var(--primary) 15%, transparent);
    color: var(--primary);
    border: 1px solid color-mix(in srgb, var(--primary) 30%, transparent);
}

.underlying-skill.secondary {
    background: var(--surface);
    color: var(--text-secondary);
    border: 1px solid var(--border);
}

.spec-deliverables-tiers h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: var(--space-sm);
}

.deliverables-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-sm);
}

.deliverable-tier {
    background: var(--background);
    border-radius: var(--radius);
    padding: var(--space-sm);
}

.tier-label {
    font-size: var(--font-size-xs);
    font-weight: 600;
    margin-bottom: var(--space-xs);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    display: inline-block;
}

.tier-label.basic { background: rgba(100, 116, 139, 0.2); color: var(--level-a1); }
.tier-label.intermediate { background: rgba(13, 148, 136, 0.2); color: var(--level-a2); }
.tier-label.advanced { background: rgba(245, 158, 11, 0.2); color: #B45309; }

.deliverable-tier ul {
    list-style: none;
}

.deliverable-tier li {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-bottom: 2px;
}

/* ===== AQS CALCULATOR STYLES ===== */
.aqs-explainer {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    margin-bottom: var(--space-lg);
}

.aqs-explainer h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.aqs-explainer > p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.aqs-formula {
    display: flex;
    align-items: stretch;
    gap: var(--space-md);
    flex-wrap: wrap;
}

.formula-part {
    flex: 1;
    min-width: 150px;
    padding: var(--space-md);
    border-radius: var(--radius);
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.formula-part .weight {
    font-size: var(--font-size-lg);
    font-weight: 700;
}

.formula-part .label {
    font-size: var(--font-size-sm);
    font-weight: 600;
}

.formula-part .detail {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.formula-part.standards {
    background: rgba(245, 158, 11, 0.1);
}

.formula-part .source {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    font-style: italic;
    margin-top: var(--space-xs);
}

/* Calculator section headers */
.calc-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-md);
}

.calc-section-header h4 {
    margin: 0;
}

.source-badge {
    font-size: var(--font-size-xs);
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    font-weight: 500;
}

.source-badge.ai {
    background: rgba(13, 148, 136, 0.15);
    color: var(--primary-dark);
}

.source-badge.pm {
    background: rgba(59, 130, 246, 0.15);
    color: #1D4ED8;
}

.source-badge.human {
    background: rgba(139, 92, 246, 0.15);
    color: #6D28D9;
}

.source-badge.system {
    background: rgba(245, 158, 11, 0.15);
    color: #B45309;
}

.plus {
    display: flex;
    align-items: center;
    font-size: var(--font-size-xl);
    font-weight: 300;
    color: var(--text-muted);
}

.aqs-score-display {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.aqs-number {
    display: block;
    font-size: 48px;
    font-weight: 700;
    color: var(--primary);
    line-height: 1;
}

.aqs-level-indicator {
    text-align: center;
}

.current-level {
    display: block;
    font-size: var(--font-size-md);
    font-weight: 600;
    color: var(--primary);
}

.level-range {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
}

.aqs-breakdown {
    display: flex;
    gap: var(--space-lg);
    justify-content: center;
}

.breakdown-item {
    text-align: center;
}

.breakdown-label {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-bottom: var(--space-xs);
}

.breakdown-value {
    font-size: var(--font-size-md);
    font-weight: 600;
    color: var(--text-primary);
}

/* Simulator Results */
.sim-result-card {
    background: var(--background);
    border-radius: var(--radius);
    padding: var(--space-md);
    text-align: center;
    margin-bottom: var(--space-md);
}

.sim-result-card .result-label {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-bottom: var(--space-xs);
}

.sim-result-card .result-value {
    font-size: var(--font-size-xl);
    font-weight: 700;
    color: var(--primary);
}

.promo-section {
    margin-bottom: var(--space-md);
}

.promo-section h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

/* Project Meta */
.project-meta .pass { color: var(--success); font-weight: 500; }
.project-meta .fail { color: var(--danger); font-weight: 500; }

/* ===== STAFFING RESULTS ===== */
.analyst-results {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.analyst-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    margin-bottom: var(--space-md);
}

.analyst-card-header {
    display: flex;
    align-items: flex-start;
    gap: var(--space-md);
}

.analyst-avatar {
    width: 48px;
    height: 48px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: var(--font-size-md);
    flex-shrink: 0;
}

.analyst-info {
    flex: 1;
}

.analyst-info h4 {
    font-size: var(--font-size-base);
    font-weight: 600;
    margin-bottom: 2px;
}

.analyst-level {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    display: block;
}

.analyst-availability {
    font-size: var(--font-size-xs);
    display: block;
    margin-top: var(--space-xs);
}

.analyst-availability.available {
    color: var(--success);
}

.analyst-availability.limited {
    color: var(--warning);
}

.match-confidence {
    text-align: right;
    flex-shrink: 0;
}

.match-badge {
    display: inline-block;
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: white;
    margin-bottom: var(--space-xs);
}

.spec-score {
    display: block;
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-secondary);
}

.analyst-meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-md);
    padding: var(--space-md) 0;
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
}

.meta-item {
    text-align: center;
    min-width: 70px;
}

.meta-label {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-bottom: 2px;
}

.meta-value {
    font-size: var(--font-size-sm);
    font-weight: 600;
}

.meta-value.spec-expert {
    color: var(--cert-expert);
}

.meta-value.spec-proficient {
    color: var(--primary);
}

.meta-value.spec-familiar {
    color: var(--text-secondary);
}

.analyst-notes {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-md);
}

.notes-section {
    padding: var(--space-sm);
    background: var(--background);
    border-radius: var(--radius);
}

.notes-label {
    display: block;
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: var(--space-xs);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.notes-section ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.notes-section li {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    padding-left: var(--space-sm);
    position: relative;
    margin-bottom: 2px;
}

.notes-section li::before {
    content: "•";
    position: absolute;
    left: 0;
}

.notes-section.strengths li::before {
    color: var(--success);
}

.notes-section.considerations li::before {
    color: var(--warning);
}

.analyst-recent {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.recent-label {
    color: var(--text-muted);
}

.recent-value {
    font-style: italic;
}

.meta-value.spec-expert { color: var(--cert-expert); }
.meta-value.spec-proficient { color: var(--primary); }
.meta-value.spec-familiar { color: var(--level-a1); }

/* Psychometric Fit Section */
.analyst-psycho {
    padding: var(--space-sm) var(--space-md);
    background: var(--background);
    border-radius: var(--radius);
    margin-bottom: var(--space-sm);
}

.analyst-psycho.no-profile {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.psycho-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-xs);
}

.psycho-label {
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.psycho-score {
    font-size: var(--font-size-sm);
    font-weight: 600;
    padding: 2px 8px;
    border-radius: var(--radius-sm);
}

.psycho-score.fit-excellent {
    background: color-mix(in srgb, var(--success) 15%, transparent);
    color: var(--success);
}

.psycho-score.fit-good {
    background: color-mix(in srgb, var(--primary) 15%, transparent);
    color: var(--primary);
}

.psycho-score.fit-caution {
    background: color-mix(in srgb, var(--warning) 15%, transparent);
    color: var(--warning);
}

.psycho-na {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    font-style: italic;
}

.psycho-traits {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-xs);
}

.trait-tag {
    font-size: var(--font-size-xs);
    padding: 2px 8px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--text-secondary);
}

/* Filter hint for optional fields */
.optional-label {
    font-weight: 400;
    color: var(--text-muted);
    font-size: var(--font-size-xs);
}

.filter-hint {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    font-style: italic;
    margin-top: var(--space-xs);
}

.no-results {
    padding: var(--space-xl);
    text-align: center;
    color: var(--text-muted);
    background: var(--background);
    border-radius: var(--radius);
}

/* ===== QUALITY REVIEW PANEL ===== */
.quality-explainer {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    margin-bottom: var(--space-lg);
}

.quality-explainer h3 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.quality-explainer p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.quality-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-xl);
}

.quality-dimensions-panel {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.dimension-selector {
    margin-bottom: var(--space-lg);
}

.dimension-selector label {
    display: block;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
}

.dimensions-list h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: var(--space-sm);
    margin-top: var(--space-lg);
}

.dimensions-list h4:first-of-type {
    margin-top: 0;
}

.dimension-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.dimension-card {
    background: var(--background);
    border-radius: var(--radius);
    padding: var(--space-md);
}

.dimension-card.specific {
}

.dimension-name {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.dimension-desc {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.quality-feedback-panel {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
}

.quality-feedback-panel h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.feedback-flow {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.flow-step {
    display: flex;
    gap: var(--space-md);
    margin-bottom: var(--space-md);
}

.flow-step:last-child {
    margin-bottom: 0;
}

.flow-icon {
    width: 28px;
    height: 28px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-sm);
    font-weight: 600;
    flex-shrink: 0;
}

.flow-content strong {
    display: block;
    font-size: var(--font-size-sm);
    margin-bottom: 2px;
}

.flow-content p {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin: 0;
}

.score-scale {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.scale-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.scale-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.score {
    width: 24px;
    height: 24px;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: white;
}

.score-1 { background: #EF4444; }
.score-2 { background: #F97316; }
.score-3 { background: #EAB308; }
.score-4 { background: #22C55E; }
.score-5 { background: #0D9488; }

.review-outcomes {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.outcome-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.outcome {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.outcome-badge {
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
    min-width: 70px;
    text-align: center;
}

.outcome.exceeded .outcome-badge {
    background: rgba(13, 148, 136, 0.15);
    color: var(--primary-dark);
}

.outcome.passed .outcome-badge {
    background: rgba(34, 197, 94, 0.15);
    color: #15803D;
}

.outcome.revise .outcome-badge {
    background: rgba(234, 179, 8, 0.15);
    color: #A16207;
}

.outcome.restart .outcome-badge {
    background: rgba(239, 68, 68, 0.15);
    color: #DC2626;
}

/* Review Workflow Diagram */
.review-workflow {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    margin-bottom: var(--space-lg);
}

.review-workflow h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.workflow-diagram {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    overflow-x: auto;
    padding-bottom: var(--space-sm);
}

.workflow-step {
    flex: 1;
    min-width: 140px;
    background: var(--background);
    border-radius: var(--radius);
    padding: var(--space-md);
    text-align: center;
}

.workflow-step.highlight {
    background: rgba(13, 148, 136, 0.1);
    border: 2px solid var(--primary);
}

.step-number {
    width: 28px;
    height: 28px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin: 0 auto var(--space-sm);
}

.workflow-step .step-content strong {
    display: block;
    font-size: var(--font-size-sm);
    margin-bottom: 2px;
}

.workflow-step .step-content p {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin: 0;
}

.step-badge {
    display: inline-block;
    font-size: var(--font-size-xs);
    padding: 2px 6px;
    border-radius: var(--radius-sm);
    background: rgba(13, 148, 136, 0.15);
    color: var(--primary-dark);
    margin-top: var(--space-xs);
}

.step-badge.warn {
    background: rgba(245, 158, 11, 0.15);
    color: #B45309;
}

.workflow-arrow {
    color: var(--text-muted);
    font-size: var(--font-size-lg);
    padding-top: var(--space-lg);
}

/* Pattern Tracking */
.pattern-tracking {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.pattern-tracking h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.pattern-tracking > p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.pattern-example {
    margin-top: var(--space-md);
}

.pattern-alert {
    display: flex;
    gap: var(--space-md);
    padding: var(--space-md);
    background: rgba(245, 158, 11, 0.1);
    border-radius: var(--radius);
}

.alert-icon {
    font-size: var(--font-size-lg);
}

.alert-content strong {
    display: block;
    font-size: var(--font-size-sm);
    margin-bottom: 2px;
}

.alert-content p {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin: 0 0 var(--space-xs);
}

.alert-action {
    font-size: var(--font-size-xs);
    color: var(--primary);
    text-decoration: none;
}

.alert-action:hover {
    text-decoration: underline;
}

/* ===== CREDENTIALING PANEL ===== */
.credentialing-intro {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
    margin-bottom: var(--space-xl);
}

.credentialing-intro h3 {
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.credentialing-intro p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

/* Verification Levels */
.verification-levels {
    margin-bottom: var(--space-xl);
}

.verification-levels h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-md);
}

.verification-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: var(--space-md);
}

.verification-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: var(--space-md);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.verification-badge {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-md);
    color: white;
    margin-bottom: var(--space-sm);
}

.verification-card.provisional .verification-badge { background: var(--level-a1); }
.verification-card.knowledge .verification-badge { background: #06B6D4; }
.verification-card.portfolio .verification-badge { background: #8B5CF6; }
.verification-card.simulation .verification-badge { background: var(--cert-expert); }
.verification-card.verified .verification-badge { background: var(--success); }

.verification-info h5 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.verification-info p {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    margin-bottom: var(--space-sm);
}

.verification-source {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    font-style: italic;
}

/* Self-Assessment Pathways */
.self-assessment-section {
    margin-bottom: var(--space-xl);
}

.self-assessment-section h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-xs);
}

.section-desc {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-lg);
}

.pathway-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
}

.pathway-card {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.pathway-card.featured {
    border: 2px solid var(--primary);
    background: rgba(13, 148, 136, 0.02);
}

.pathway-icon {
    font-size: 32px;
    margin-bottom: var(--space-md);
}

.pathway-content h5 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.pathway-content > p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.pathway-details {
    list-style: none;
    margin-bottom: var(--space-md);
}

.pathway-details li {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    padding-left: var(--space-md);
    position: relative;
    margin-bottom: var(--space-xs);
}

.pathway-details li::before {
    content: "•";
    position: absolute;
    left: 0;
    color: var(--primary);
}

.pathway-outcome {
    padding-top: var(--space-md);
    border-top: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    flex-wrap: wrap;
}

.outcome-label {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

.verification-tag {
    font-size: var(--font-size-xs);
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    font-weight: 500;
}

.verification-tag.knowledge {
    background: rgba(6, 182, 212, 0.15);
    color: #0891B2;
}

.verification-tag.portfolio {
    background: rgba(139, 92, 246, 0.15);
    color: #7C3AED;
}

.verification-tag.simulation {
    background: rgba(245, 158, 11, 0.15);
    color: #B45309;
}

.outcome-note {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
}

/* Level Confirmation */
.level-confirmation-section {
    margin-bottom: var(--space-xl);
}

.level-confirmation-section h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-lg);
}

.confirmation-timeline {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--border);
}

.timeline-phase {
    display: flex;
    gap: var(--space-md);
    align-items: flex-start;
}

.phase-marker {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: var(--font-size-sm);
    color: white;
    flex-shrink: 0;
}

.phase-marker.provisional { background: var(--level-a1); }
.phase-marker.review { background: var(--cert-expert); }
.phase-marker.verified { background: var(--success); }

.phase-content strong {
    display: block;
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-xs);
}

.phase-content > p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin: 0;
}

.review-factors {
    list-style: none;
    margin-top: var(--space-sm);
}

.review-factors li {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    padding-left: var(--space-md);
    position: relative;
    margin-bottom: var(--space-xs);
}

.review-factors li::before {
    content: "→";
    position: absolute;
    left: 0;
    color: var(--primary);
}

.timeline-connector {
    margin: var(--space-md) 0;
    padding-left: calc(36px / 2 + var(--space-md));
    border-left: 2px dashed var(--border);
    margin-left: calc(36px / 2);
    min-height: 30px;
    display: flex;
    align-items: center;
}

.connector-label {
    font-size: var(--font-size-xs);
    color: var(--primary);
    font-weight: 500;
    background: var(--surface);
    padding: 0 var(--space-sm);
    margin-left: calc(-1 * var(--space-sm));
}

/* Not Yet Assessed */
.not-assessed-section {
    background: var(--background);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
}

.not-assessed-section h4 {
    font-size: var(--font-size-md);
    font-weight: 600;
    margin-bottom: var(--space-sm);
}

.not-assessed-section > p {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-md);
}

.nya-examples {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.nya-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-sm) var(--space-md);
    background: var(--surface);
    border-radius: var(--radius);
    border: 1px solid var(--border);
}

.nya-label {
    font-size: var(--font-size-sm);
    font-weight: 500;
}

.nya-status {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
    font-style: italic;
}

.nya-note {
    font-size: var(--font-size-sm);
    color: var(--primary);
    font-weight: 500;
}

/* Responsive adjustments for new components */
@media (max-width: 1200px) {
    .how-it-works-grid {
        grid-template-columns: 1fr;
    }

    .levels-summary-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .progression-drivers {
        grid-template-columns: 1fr;
    }

    .level-expectations {
        grid-template-columns: repeat(2, 1fr);
    }

    .levels-detailed-grid {
        grid-template-columns: 1fr;
    }

    .ss-tiers-legend {
        grid-template-columns: 1fr;
    }

    .quality-layout {
        grid-template-columns: 1fr;
    }

    /* Credentialing panel responsive */
    .verification-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    .pathway-cards {
        grid-template-columns: repeat(2, 1fr);
    }

    /* Baseball card responsive */
    .about-assessment-row {
        grid-template-columns: 1fr;
    }

    .assessment-column {
        order: -1;
    }

    .samples-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .case-study-card {
        grid-template-columns: 1fr;
    }

    .feedback-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .levels-summary-grid {
        grid-template-columns: 1fr;
    }

    .spec-tiers {
        grid-template-columns: 1fr;
    }

    .level-expectations {
        grid-template-columns: 1fr;
    }

    .quality-overview {
        grid-template-columns: 1fr;
    }

    .deliverables-grid {
        grid-template-columns: 1fr;
    }

    .spec-methods ul {
        grid-template-columns: 1fr;
    }

    .analyst-card-header {
        flex-direction: column;
        text-align: center;
    }

    .match-confidence {
        text-align: center;
    }

    .analyst-notes {
        grid-template-columns: 1fr;
    }

    .analyst-meta {
        justify-content: center;
    }

    /* Credentialing panel - mobile */
    .verification-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .pathway-cards {
        grid-template-columns: 1fr;
    }

    .nya-item {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-xs);
    }

    .confirmation-timeline {
        padding: var(--space-md);
    }

    .timeline-phase {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .phase-content {
        text-align: center;
    }

    .review-factors {
        text-align: left;
    }

    /* Baseball card - mobile */
    .baseball-card-header {
        padding: var(--space-lg);
        margin: calc(-1 * var(--space-lg)) calc(-1 * var(--space-lg)) var(--space-lg) calc(-1 * var(--space-lg));
    }

    .profile-hero {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .name-row {
        justify-content: center;
    }

    .skill-tags {
        justify-content: center;
    }

    .profile-meta {
        flex-direction: column;
        gap: var(--space-sm);
    }

    .hire-cta {
        width: 100%;
    }

    .btn-hire {
        width: 100%;
    }

    .skills-grid {
        grid-template-columns: 1fr;
    }

    .samples-grid {
        grid-template-columns: 1fr;
    }

    .feedback-grid {
        grid-template-columns: 1fr;
    }

    .case-study-metrics .metric-value {
        font-size: 36px;
    }
}

@media (max-width: 480px) {
    .verification-grid {
        grid-template-columns: 1fr;
    }

    .verification-card {
        flex-direction: row;
        text-align: left;
        gap: var(--space-md);
    }

    .verification-badge {
        margin-bottom: 0;
    }
}
</style>
</head>
<body>
    <div class="app-container">
        <!-- Top Navigation -->
        <nav class="top-nav">
            <div class="nav-brand">
                <span class="brand-icon">G</span>
                <span class="brand-text">Gratia Skills Framework</span>
            </div>
            <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-tabs" id="navTabs">
                <button class="nav-tab active" data-view="overview">Overview</button>
                <button class="nav-tab" data-view="levels">Analyst Levels</button>
                <button class="nav-tab" data-view="specializations">Specializations</button>
                <button class="nav-tab" data-view="assessment">Assessment</button>
                <button class="nav-tab" data-view="staffing">Staffing</button>
            </div>
        </nav>

        <!-- Toast Container -->
        <div class="toast-container" id="toastContainer"></div>

        <!-- Main Content Area -->
        <main class="main-content">
            <section id="overview-view" class="view active">
                <div class="overview-hero">
                    <h1>Gratia Skills Framework</h1>
                    <p class="hero-subtitle">A system for credentialing analysts, matching them to projects, and maintaining quality at scale.</p>
                </div>

                <!-- The Problem -->
                <div class="overview-section deck-slide">
                    <span class="slide-label">The Challenge</span>
                    <h2>Why We Need This</h2>

                    <div class="problem-grid">
                        <div class="problem-card">
                            <div class="problem-icon">🎯</div>
                            <h3>Matching Problem</h3>
                            <p>How do we know which analyst to assign to a DCF valuation vs. a pitch deck vs. a market sizing exercise?</p>
                            <span class="problem-pain">Without a system: gut feel, availability-based staffing, mismatches</span>
                        </div>
                        <div class="problem-card">
                            <div class="problem-icon">📊</div>
                            <h3>Quality Problem</h3>
                            <p>How do we catch quality issues before they reach clients? How do we know who's improving vs. declining?</p>
                            <span class="problem-pain">Without a system: reactive firefighting, no early warning</span>
                        </div>
                        <div class="problem-card">
                            <div class="problem-icon">📈</div>
                            <h3>Development Problem</h3>
                            <p>How do analysts know what to work on? How do we identify who's ready for more complex work?</p>
                            <span class="problem-pain">Without a system: arbitrary promotion, unclear expectations</span>
                        </div>
                    </div>
                </div>

                <!-- The Solution -->
                <div class="overview-section deck-slide">
                    <span class="slide-label">The Solution</span>
                    <h2>Three Interlocking Systems</h2>

                    <div class="solution-grid">
                        <div class="solution-card">
                            <div class="solution-number">1</div>
                            <div class="solution-content">
                                <h3>Analyst Levels (A1-A4)</h3>
                                <p>Overall capability tier. Determines what complexity of work someone can handle, rate bands, and supervision requirements.</p>
                                <div class="solution-insight">
                                    <span class="insight-label">Key insight:</span>
                                    Levels are based on <em>demonstrated performance</em>, not tenure or credentials. An analyst with 6 months can be A3 if the work proves it.
                                </div>
                            </div>
                        </div>
                        <div class="solution-card">
                            <div class="solution-number">2</div>
                            <div class="solution-content">
                                <h3>Specializations (9 service areas)</h3>
                                <p>Domain expertise depth. An A3 analyst might be Expert in Financial Models but only Familiar with Pitch Decks.</p>
                                <div class="solution-insight">
                                    <span class="insight-label">Key insight:</span>
                                    Specialization score weights quality and complexity, not just hours. 200 hours of advanced DCF work beats 500 hours of basic budgets.
                                </div>
                            </div>
                        </div>
                        <div class="solution-card">
                            <div class="solution-number">3</div>
                            <div class="solution-content">
                                <h3>AQS (Quality Score)</h3>
                                <p>Rolling 90-day performance metric. Combines AI-assessed work quality with client satisfaction and process compliance.</p>
                                <div class="solution-insight">
                                    <span class="insight-label">Key insight:</span>
                                    First-submission scores count — not post-feedback revisions. This measures true independent capability.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analyst Levels Detail -->
                <div class="overview-section deck-slide">
                    <span class="slide-label">Component 1</span>
                    <div class="section-header-row">
                        <h2>Analyst Levels</h2>
                        <a href="#" class="section-link" data-nav="levels">Full details →</a>
                    </div>

                    <div class="levels-summary-grid">
                        <div class="level-summary-card level-a1">
                            <div class="level-badge">A1</div>
                            <div class="level-info">
                                <h3>Apprentice</h3>
                                <p>Requires supervision. Well-defined tasks only.</p>
                            </div>
                            <div class="level-aqs">AQS 70+</div>
                        </div>
                        <div class="level-summary-card level-a2">
                            <div class="level-badge">A2</div>
                            <div class="level-info">
                                <h3>Associate</h3>
                                <p>Works independently. Standard deliverables.</p>
                            </div>
                            <div class="level-aqs">AQS 80+</div>
                        </div>
                        <div class="level-summary-card level-a3">
                            <div class="level-badge">A3</div>
                            <div class="level-info">
                                <h3>Business Analyst</h3>
                                <p>Complex work. Direct client interface.</p>
                            </div>
                            <div class="level-aqs">AQS 90+</div>
                        </div>
                        <div class="level-summary-card level-a4">
                            <div class="level-badge">A4</div>
                            <div class="level-info">
                                <h3>Senior</h3>
                                <p>Expert. Strategic engagements. Mentors others.</p>
                            </div>
                            <div class="level-aqs">AQS 95+</div>
                        </div>
                    </div>

                    <div class="design-decision">
                        <h4>Design Decision: Soft Restriction on Decline</h4>
                        <p>If an A3's AQS drops below 90 for a sustained period, they don't get demoted immediately. Instead:</p>
                        <ul>
                            <li>They keep their A3 title</li>
                            <li>They're flagged internally (not visible to clients)</li>
                            <li>They're not matched to A3-level work until AQS recovers</li>
                        </ul>
                        <span class="decision-rationale">Why: Demotion is demoralizing and often temporary. Soft restriction gives time to recover while protecting project quality.</span>
                    </div>
                </div>

                <!-- Specializations Summary -->
                <div class="overview-section deck-slide">
                    <span class="slide-label">Component 2</span>
                    <div class="section-header-row">
                        <h2>Specializations</h2>
                        <a href="#" class="section-link" data-nav="specializations">Full details →</a>
                    </div>

                    <div class="specs-summary-grid">
                        <div class="spec-summary-card">
                            <span class="spec-icon">📊</span>
                            <span class="spec-name">Financial Models</span>
                        </div>
                        <div class="spec-summary-card">
                            <span class="spec-icon">📑</span>
                            <span class="spec-name">Pitch Decks</span>
                        </div>
                        <div class="spec-summary-card">
                            <span class="spec-icon">🔍</span>
                            <span class="spec-name">Market Research</span>
                        </div>
                        <div class="spec-summary-card">
                            <span class="spec-icon">📈</span>
                            <span class="spec-name">Dashboards</span>
                        </div>
                        <div class="spec-summary-card">
                            <span class="spec-icon">⚙️</span>
                            <span class="spec-name">Process Optimization</span>
                        </div>
                        <div class="spec-summary-card">
                            <span class="spec-icon">📋</span>
                            <span class="spec-name">Project Management</span>
                        </div>
                        <div class="spec-summary-card">
                            <span class="spec-icon">📝</span>
                            <span class="spec-name">Proposals</span>
                        </div>
                        <div class="spec-summary-card">
                            <span class="spec-icon">🚀</span>
                            <span class="spec-name">RevOps & GTM</span>
                        </div>
                        <div class="spec-summary-card">
                            <span class="spec-icon">🎯</span>
                            <span class="spec-name">Business Strategy</span>
                        </div>
                    </div>

                    <div class="spec-score-explainer">
                        <h4>Specialization Score (SS)</h4>
                        <div class="ss-formula">
                            <span class="ss-part"><strong>40%</strong> Hours</span>
                            <span class="ss-plus">+</span>
                            <span class="ss-part"><strong>40%</strong> Quality</span>
                            <span class="ss-plus">+</span>
                            <span class="ss-part"><strong>20%</strong> Complexity</span>
                        </div>
                    </div>

                    <div class="spec-tiers">
                        <div class="spec-tier-card tier-familiar">
                            <span class="tier-score">SS 50-69</span>
                            <span class="tier-name">Familiar</span>
                            <span class="tier-desc">Support roles only</span>
                        </div>
                        <div class="spec-tier-card tier-proficient">
                            <span class="tier-score">SS 70-84</span>
                            <span class="tier-name">Proficient</span>
                            <span class="tier-desc">Independent work</span>
                        </div>
                        <div class="spec-tier-card tier-expert">
                            <span class="tier-score">SS 85+</span>
                            <span class="tier-name">Expert</span>
                            <span class="tier-desc">Lead complex projects</span>
                        </div>
                    </div>

                    <div class="design-decisions-group">
                        <div class="design-decision">
                            <h4>Design Decision: Task-Level Tagging</h4>
                            <p>Projects often span multiple specializations. A "GTM launch" might include pitch decks, market research, and RevOps setup.</p>
                            <p><strong>Solution:</strong> Hours are logged at the <em>task level</em>, not project level. Each task is tagged to one specialization.</p>
                            <span class="decision-rationale">Why: This gives accurate credit for cross-domain projects without complex hour-splitting.</span>
                        </div>

                        <div class="design-decision">
                            <h4>Design Decision: Complexity Assignment</h4>
                            <p>How do we decide if a financial model is "basic" vs "advanced"?</p>
                            <p><strong>Solution:</strong> Hybrid approach — deliverable types have default complexity levels (DCF = advanced, budget template = basic), but PM can override based on actual scope.</p>
                            <span class="decision-rationale">Why: Taxonomy provides consistency; PM override handles edge cases.</span>
                        </div>
                    </div>
                </div>

                <!-- AQS Deep Dive -->
                <div class="overview-section deck-slide">
                    <span class="slide-label">Component 3</span>
                    <div class="section-header-row">
                        <h2>Quality Score (AQS)</h2>
                        <a href="#" class="section-link" data-nav="assessment">Calculator →</a>
                    </div>

                    <div class="aqs-breakdown-visual">
                        <div class="aqs-component">
                            <span class="aqs-weight">35%</span>
                            <div class="aqs-detail">
                                <strong>Work Quality</strong>
                                <span>First-submission AI scores + revision rate</span>
                                <span class="source-tag">AI-assessed</span>
                            </div>
                        </div>
                        <div class="aqs-component">
                            <span class="aqs-weight">20%</span>
                            <div class="aqs-detail">
                                <strong>Delivery</strong>
                                <span>On-time rate</span>
                                <span class="source-tag">PM input</span>
                            </div>
                        </div>
                        <div class="aqs-component">
                            <span class="aqs-weight">25%</span>
                            <div class="aqs-detail">
                                <strong>Satisfaction</strong>
                                <span>Client + PM + peer ratings</span>
                                <span class="source-tag">Human input</span>
                            </div>
                        </div>
                        <div class="aqs-component">
                            <span class="aqs-weight">20%</span>
                            <div class="aqs-detail">
                                <strong>Gratia Standards</strong>
                                <span>Time logging, updates, process</span>
                                <span class="source-tag">System data</span>
                            </div>
                        </div>
                    </div>

                    <div class="design-decision">
                        <h4>Design Decision: What Counts as a Revision?</h4>
                        <p>AI feedback often includes minor polish suggestions (tightening copy, formatting tweaks). If we count these as "revisions," everyone looks bad.</p>
                        <p><strong>Solution:</strong> AI classifies its own feedback as <em>substantive</em> (missing requirements, errors, methodology issues) vs. <em>polish</em> (formatting, word choice). Only substantive issues count toward revision rate.</p>
                        <span class="decision-rationale">Why: Prevents AQS deflation from AI perfectionism. Measures real quality gaps, not cosmetic preferences.</span>
                    </div>

                    <div class="design-decision">
                        <h4>Design Decision: First-Submission Scoring</h4>
                        <p>We score what the analyst submits <em>before</em> AI feedback, not the polished final version.</p>
                        <span class="decision-rationale">Why: Measures true independent capability. Prevents gaming by relying on AI to catch everything.</span>
                    </div>
                </div>

                <!-- How It Works Together -->
                <div class="overview-section deck-slide">
                    <span class="slide-label">In Practice</span>
                    <h2>How It Works Together</h2>

                    <div class="practice-example">
                        <h4>Example: Staffing a DCF Valuation Project</h4>
                        <div class="practice-flow">
                            <div class="practice-step">
                                <span class="practice-num">1</span>
                                <div class="practice-content">
                                    <strong>Requirements</strong>
                                    <p>Client needs a DCF model for Series B fundraise. Complex work, client-facing.</p>
                                </div>
                            </div>
                            <div class="practice-step">
                                <span class="practice-num">2</span>
                                <div class="practice-content">
                                    <strong>Filter by Level</strong>
                                    <p>Complex + client-facing = A3 minimum</p>
                                </div>
                            </div>
                            <div class="practice-step">
                                <span class="practice-num">3</span>
                                <div class="practice-content">
                                    <strong>Filter by Specialization</strong>
                                    <p>Financial Models at Expert tier (SS 85+)</p>
                                </div>
                            </div>
                            <div class="practice-step">
                                <span class="practice-num">4</span>
                                <div class="practice-content">
                                    <strong>Consider Fit</strong>
                                    <p>Client is a fast-moving startup → check psychometric fit</p>
                                </div>
                            </div>
                            <div class="practice-step">
                                <span class="practice-num">5</span>
                                <div class="practice-content">
                                    <strong>Match</strong>
                                    <p>Sarah Mitchell: A3, Financial Expert (SS 91), Good startup fit</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="career-path-compact">
                        <h4>Typical Progression</h4>
                        <div class="progression-visual">
                            <div class="prog-stage">
                                <span class="prog-level">A1</span>
                                <span class="prog-specs">1-2 Familiar</span>
                                <span class="prog-work">Basic deliverables, supervised</span>
                            </div>
                            <div class="prog-arrow">→</div>
                            <div class="prog-stage">
                                <span class="prog-level">A2</span>
                                <span class="prog-specs">1+ Proficient</span>
                                <span class="prog-work">Independent, intermediate</span>
                            </div>
                            <div class="prog-arrow">→</div>
                            <div class="prog-stage">
                                <span class="prog-level">A3</span>
                                <span class="prog-specs">1+ Expert, 2+ Proficient</span>
                                <span class="prog-work">Complex, client-facing</span>
                            </div>
                            <div class="prog-arrow">→</div>
                            <div class="prog-stage">
                                <span class="prog-level">A4</span>
                                <span class="prog-specs">2+ Expert, 3+ Proficient</span>
                                <span class="prog-work">Strategic, mentoring</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Upskilling -->
                <div class="overview-section deck-slide">
                    <span class="slide-label">Development</span>
                    <h2>Upskilling Resources</h2>

                    <p class="section-intro">When pattern tracking reveals weaknesses, analysts get targeted development paths. Each specialization has associated certifications and training.</p>

                    <div class="upskilling-grid">
                        <div class="upskill-category">
                            <h4>Financial Models</h4>
                            <ul>
                                <li>Wall Street Prep courses</li>
                                <li>CFA programs</li>
                                <li>Advanced Excel/VBA training</li>
                            </ul>
                        </div>
                        <div class="upskill-category">
                            <h4>Pitch Decks</h4>
                            <ul>
                                <li>Design thinking workshops</li>
                                <li>Strategic framework training</li>
                                <li>Advanced PowerPoint/Keynote</li>
                            </ul>
                        </div>
                        <div class="upskill-category">
                            <h4>Market Research</h4>
                            <ul>
                                <li>Market Research Society programs</li>
                                <li>Statistical analysis training</li>
                                <li>Google Analytics certification</li>
                            </ul>
                        </div>
                        <div class="upskill-category">
                            <h4>Dashboards</h4>
                            <ul>
                                <li>Tableau Desktop Certified</li>
                                <li>Microsoft Power BI Certified</li>
                                <li>SQL & Python courses</li>
                            </ul>
                        </div>
                        <div class="upskill-category">
                            <h4>Process Optimization</h4>
                            <ul>
                                <li>Lean Six Sigma (Green/Black Belt)</li>
                                <li>Automation platform training</li>
                                <li>Process improvement methodologies</li>
                            </ul>
                        </div>
                        <div class="upskill-category">
                            <h4>Project Management</h4>
                            <ul>
                                <li>PMP certification</li>
                                <li>Certified Scrum Master (CSM)</li>
                                <li>Agile methodologies</li>
                            </ul>
                        </div>
                        <div class="upskill-category">
                            <h4>Proposals</h4>
                            <ul>
                                <li>APMP certification</li>
                                <li>Business case methodology</li>
                                <li>Financial analysis programs</li>
                            </ul>
                        </div>
                        <div class="upskill-category">
                            <h4>RevOps & GTM</h4>
                            <ul>
                                <li>Salesforce Admin/Consultant</li>
                                <li>HubSpot certifications</li>
                                <li>Sales methodology training</li>
                            </ul>
                        </div>
                        <div class="upskill-category">
                            <h4>Business Strategy</h4>
                            <ul>
                                <li>Executive strategy programs</li>
                                <li>MBA-level strategy courses</li>
                                <li>Certified Management Consultant</li>
                            </ul>
                        </div>
                    </div>

                    <div class="upskill-note">
                        <strong>AI-Enhanced Learning:</strong> Each specialization includes AI prompting workshops where analysts learn service-specific AI applications — turning AI from a general productivity tool into a specialized consulting accelerator.
                    </div>
                </div>

                <!-- Psychometrics -->
                <div class="overview-section deck-slide">
                    <span class="slide-label">Additional Signal</span>
                    <h2>Work Style Fit (Psychometrics)</h2>

                    <div class="psycho-intro">
                        <p>Beyond skills, we capture work style preferences via Principles Us assessment. This helps with client-analyst chemistry and team composition.</p>
                    </div>

                    <div class="psycho-compact">
                        <div class="psycho-dims-compact">
                            <div class="dim-compact"><strong>Work Style:</strong> Methodical ↔ Adaptive</div>
                            <div class="dim-compact"><strong>Communication:</strong> Direct ↔ Diplomatic</div>
                            <div class="dim-compact"><strong>Decision Making:</strong> Analytical ↔ Intuitive</div>
                            <div class="dim-compact"><strong>Collaboration:</strong> Independent ↔ Collaborative</div>
                            <div class="dim-compact"><strong>Risk Tolerance:</strong> Conservative ↔ Bold</div>
                            <div class="dim-compact"><strong>Feedback:</strong> Candid ↔ Supportive</div>
                        </div>

                        <div class="psycho-profiles">
                            <h4>Client Profile Templates</h4>
                            <div class="profile-tags">
                                <span class="profile-tag">Startup / Fast-paced</span>
                                <span class="profile-tag">Enterprise / Process-driven</span>
                                <span class="profile-tag">Consulting firm</span>
                                <span class="profile-tag">Creative / Agency</span>
                            </div>
                        </div>
                    </div>

                    <div class="design-decision">
                        <h4>Design Decision: Optional, Not Required</h4>
                        <p>Psychometrics are surfaced in staffing but never used to exclude analysts.</p>
                        <ul>
                            <li>An Expert with "poor fit" beats a Familiar with "perfect fit"</li>
                            <li>Shown as additional context, not a filter</li>
                            <li>Helps PMs manage the relationship, not gatekeep it</li>
                        </ul>
                        <span class="decision-rationale">Why: Skills predict success better than personality. But knowing someone is "direct + independent" helps set expectations.</span>
                    </div>
                </div>

                <!-- Quality Workflow -->
                <div class="overview-section deck-slide">
                    <span class="slide-label">Quality Assurance</span>
                    <h2>The Review Workflow</h2>

                    <div class="workflow-compact">
                        <div class="workflow-step-compact">
                            <span class="wf-num">1</span>
                            <strong>Submit</strong>
                            <span>Analyst submits first draft</span>
                        </div>
                        <div class="workflow-arrow-compact">→</div>
                        <div class="workflow-step-compact highlight">
                            <span class="wf-num">2</span>
                            <strong>AI Scores</strong>
                            <span>8 dimensions, first-submission recorded</span>
                        </div>
                        <div class="workflow-arrow-compact">→</div>
                        <div class="workflow-step-compact">
                            <span class="wf-num">3</span>
                            <strong>Feedback</strong>
                            <span>AI provides improvement notes</span>
                        </div>
                        <div class="workflow-arrow-compact">→</div>
                        <div class="workflow-step-compact">
                            <span class="wf-num">4</span>
                            <strong>Revise</strong>
                            <span>If substantive issues (not just polish)</span>
                        </div>
                        <div class="workflow-arrow-compact">→</div>
                        <div class="workflow-step-compact">
                            <span class="wf-num">5</span>
                            <strong>Deliver</strong>
                            <span>When avg ≥ 3.5</span>
                        </div>
                    </div>

                    <div class="dimensions-summary">
                        <h4>Scoring Dimensions</h4>
                        <div class="dims-two-col">
                            <div class="dims-col">
                                <h5>Universal (all deliverables)</h5>
                                <ul>
                                    <li>Completeness</li>
                                    <li>Accuracy</li>
                                    <li>Presentation</li>
                                    <li>Timeliness</li>
                                </ul>
                            </div>
                            <div class="dims-col">
                                <h5>Specialization-specific</h5>
                                <ul>
                                    <li>4 additional dimensions per specialization</li>
                                    <li>e.g., Formula Integrity for Financial Models</li>
                                    <li>e.g., Narrative Flow for Pitch Decks</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <a href="#" class="section-link" data-nav="assessment">See all dimensions →</a>
                </div>

                <!-- Summary -->
                <div class="overview-section deck-slide final-slide">
                    <span class="slide-label">Summary</span>
                    <h2>The Framework at a Glance</h2>

                    <div class="summary-table">
                        <div class="summary-row header">
                            <span>Component</span>
                            <span>Purpose</span>
                            <span>Key Metric</span>
                        </div>
                        <div class="summary-row">
                            <span><strong>Analyst Levels</strong></span>
                            <span>Overall capability tier</span>
                            <span>A1 → A2 → A3 → A4</span>
                        </div>
                        <div class="summary-row">
                            <span><strong>Specializations</strong></span>
                            <span>Domain expertise depth</span>
                            <span>SS: Familiar → Proficient → Expert</span>
                        </div>
                        <div class="summary-row">
                            <span><strong>AQS</strong></span>
                            <span>Ongoing performance</span>
                            <span>0-100 (rolling 90-day)</span>
                        </div>
                        <div class="summary-row">
                            <span><strong>Psychometrics</strong></span>
                            <span>Work style fit</span>
                            <span>6 dimensions (optional signal)</span>
                        </div>
                    </div>

                    <div class="key-principles">
                        <h4>Key Principles</h4>
                        <div class="principles-grid">
                            <div class="principle">
                                <strong>Performance over tenure</strong>
                                <span>You level up by proving it, not by waiting</span>
                            </div>
                            <div class="principle">
                                <strong>Quality over quantity</strong>
                                <span>200 hours of complex work beats 500 hours of basics</span>
                            </div>
                            <div class="principle">
                                <strong>First-submission counts</strong>
                                <span>We measure what you deliver before AI helps</span>
                            </div>
                            <div class="principle">
                                <strong>Skills trump style</strong>
                                <span>Psychometrics inform, never gatekeep</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ANALYST LEVELS VIEW -->
            <section id="levels-view" class="view">
                <div class="view-header">
                    <h1>Analyst Levels</h1>
                    <p>Four credential tiers that reflect your demonstrated capability. Your level determines project eligibility, complexity, and rates.</p>
                </div>

                <div class="levels-detailed-grid">
                    <div class="level-detailed-card level-a1">
                        <div class="level-card-header">
                            <div class="level-badge-large">A1</div>
                            <div>
                                <h2>Apprentice Business Analyst</h2>
                                <span class="level-subtitle">Building foundations</span>
                            </div>
                        </div>
                        <div class="level-card-body">
                            <div class="level-description">
                                <h4>What you do</h4>
                                <ul>
                                    <li>Execute well-defined tasks with clear guidance</li>
                                    <li>Learn Gratia methodologies and standards</li>
                                    <li>Work under senior analyst supervision</li>
                                    <li>Build core tool proficiency</li>
                                </ul>
                            </div>
                            <div class="level-requirements">
                                <h4>Requirements</h4>
                                <div class="req-item"><span class="req-label">AQS</span><span class="req-value">70+</span></div>
                                <div class="req-item"><span class="req-label">Specializations</span><span class="req-value">Building first Familiar</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="level-detailed-card level-a2">
                        <div class="level-card-header">
                            <div class="level-badge-large">A2</div>
                            <div>
                                <h2>Associate Business Analyst</h2>
                                <span class="level-subtitle">Independent contributor</span>
                            </div>
                        </div>
                        <div class="level-card-body">
                            <div class="level-description">
                                <h4>What you do</h4>
                                <ul>
                                    <li>Work independently on standard deliverables</li>
                                    <li>Deliver reliable quality and accuracy</li>
                                    <li>Communicate directly with clients</li>
                                    <li>Seek guidance only for complex situations</li>
                                </ul>
                            </div>
                            <div class="level-requirements">
                                <h4>Requirements</h4>
                                <div class="req-item"><span class="req-label">AQS</span><span class="req-value">80+</span></div>
                                <div class="req-item"><span class="req-label">Specializations</span><span class="req-value">1+ Proficient</span></div>
                            </div>
                        </div>
                        <div class="level-promotion">
                            <h4>To reach A2 from A1</h4>
                            <ul>
                                <li>AQS consistently 80+</li>
                                <li>At least 1 specialization at Proficient (SS 70+)</li>
                                <li>3+ deliverables with "Passed" or better review</li>
                                <li>4+ avg client feedback rating</li>
                            </ul>
                        </div>
                    </div>

                    <div class="level-detailed-card level-a3">
                        <div class="level-card-header">
                            <div class="level-badge-large">A3</div>
                            <div>
                                <h2>Business Analyst</h2>
                                <span class="level-subtitle">Strategic problem-solver</span>
                            </div>
                        </div>
                        <div class="level-card-body">
                            <div class="level-description">
                                <h4>What you do</h4>
                                <ul>
                                    <li>Design approaches for complex problems</li>
                                    <li>Exercise sound business judgment</li>
                                    <li>Deliver outcomes, not just outputs</li>
                                    <li>Mentor junior analysts</li>
                                </ul>
                            </div>
                            <div class="level-requirements">
                                <h4>Requirements</h4>
                                <div class="req-item"><span class="req-label">AQS</span><span class="req-value">90+</span></div>
                                <div class="req-item"><span class="req-label">Specializations</span><span class="req-value">1+ Expert, 2+ Proficient</span></div>
                            </div>
                        </div>
                        <div class="level-promotion">
                            <h4>To reach A3 from A2</h4>
                            <ul>
                                <li>AQS consistently 90+</li>
                                <li>At least 1 specialization at Expert (SS 85+)</li>
                                <li>At least 2 specializations at Proficient or above</li>
                                <li>5+ deliverables with "Exceeded" review</li>
                                <li>4.5+ avg client feedback rating</li>
                            </ul>
                        </div>
                    </div>

                    <div class="level-detailed-card level-a4">
                        <div class="level-card-header">
                            <div class="level-badge-large">A4</div>
                            <div>
                                <h2>Senior Business Analyst</h2>
                                <span class="level-subtitle">Expert & trusted advisor</span>
                            </div>
                        </div>
                        <div class="level-card-body">
                            <div class="level-description">
                                <h4>What you do</h4>
                                <ul>
                                    <li>Recognized domain expert</li>
                                    <li>Handle the most challenging problems</li>
                                    <li>Create knowledge and train others</li>
                                    <li>Set quality standards for the team</li>
                                </ul>
                            </div>
                            <div class="level-requirements">
                                <h4>Requirements</h4>
                                <div class="req-item"><span class="req-label">AQS</span><span class="req-value">95+</span></div>
                                <div class="req-item"><span class="req-label">Specializations</span><span class="req-value">2+ Expert, 3+ Proficient</span></div>
                            </div>
                        </div>
                        <div class="level-promotion">
                            <h4>To reach A4 from A3</h4>
                            <ul>
                                <li>AQS consistently 95+</li>
                                <li>At least 2 specializations at Expert (SS 85+)</li>
                                <li>At least 3 specializations at Proficient or above</li>
                                <li>Reference-quality work consistently</li>
                                <li>Contributes to team standards and training</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Core Competencies -->
                <div class="competencies-section">
                    <h2>Core Competencies</h2>
                    <p>Five dimensions assessed at every level. Your overall capability across these determines your analyst level.</p>

                    <div class="competencies-grid" id="competenciesGrid">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </section>

            <!-- SPECIALIZATIONS VIEW -->
            <section id="specializations-view" class="view">
                <div class="view-header">
                    <h1>Specializations</h1>
                    <p>Nine service areas where you build expertise. Hours logged determine your eligibility for projects in each area.</p>
                </div>

                <div class="spec-score-legend">
                    <div class="legend-intro">
                        <p><strong>Specialization Score (SS)</strong> = 40% Hours + 40% Quality + 20% Complexity</p>
                    </div>
                    <div class="ss-tiers-legend">
                        <div class="ss-tier">
                            <span class="ss-badge tier-familiar">SS 50-69</span>
                            <div class="ss-tier-info">
                                <strong>Familiar</strong>
                                <span>Can support on basic work, needs oversight</span>
                            </div>
                        </div>
                        <div class="ss-tier">
                            <span class="ss-badge tier-proficient">SS 70-84</span>
                            <div class="ss-tier-info">
                                <strong>Proficient</strong>
                                <span>Works independently on intermediate deliverables</span>
                            </div>
                        </div>
                        <div class="ss-tier">
                            <span class="ss-badge tier-expert">SS 85+</span>
                            <div class="ss-tier-info">
                                <strong>Expert</strong>
                                <span>Leads complex projects, advanced techniques</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="specializations-detailed-grid" id="specializationsGrid">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- ASSESSMENT VIEW -->
            <section id="assessment-view" class="view">
                <div class="view-header">
                    <h1>Assessment</h1>
                    <p>Calculate your AQS score and simulate performance scenarios.</p>
                </div>

                <div class="assessment-tabs">
                    <button class="assessment-tab active" data-assess="credentialing">Credentialing</button>
                    <button class="assessment-tab" data-assess="aqs">AQS Calculator</button>
                    <button class="assessment-tab" data-assess="quality">Quality Review</button>
                    <button class="assessment-tab" data-assess="simulator">Simulator</button>
                </div>

                <!-- Credentialing Panel -->
                <div id="credentialing-panel" class="assessment-panel active">
                    <div class="credentialing-intro">
                        <h3>How Credentialing Works</h3>
                        <p>Your level and specialization credentials evolve as we gather more signal. Interview assessments are provisional — real project work is the gold standard.</p>
                    </div>

                    <!-- Verification Levels -->
                    <div class="verification-levels">
                        <h4>Verification Levels</h4>
                        <div class="verification-grid">
                            <div class="verification-card provisional">
                                <div class="verification-badge">P</div>
                                <div class="verification-info">
                                    <h5>Provisional</h5>
                                    <p>Interview-based assessment. Subject to adjustment after 50 hours of real work.</p>
                                    <span class="verification-source">Source: Interview process</span>
                                </div>
                            </div>
                            <div class="verification-card knowledge">
                                <div class="verification-badge">K</div>
                                <div class="verification-info">
                                    <h5>Knowledge Verified</h5>
                                    <p>Passed knowledge tests (MCQs). Knows the theory but execution unproven.</p>
                                    <span class="verification-source">Source: Self-assessment</span>
                                </div>
                            </div>
                            <div class="verification-card portfolio">
                                <div class="verification-badge">F</div>
                                <div class="verification-info">
                                    <h5>Portfolio Graded</h5>
                                    <p>Submitted deliverable reviewed by AI. Shows capability but context unverified.</p>
                                    <span class="verification-source">Source: Self-assessment</span>
                                </div>
                            </div>
                            <div class="verification-card simulation">
                                <div class="verification-badge">S</div>
                                <div class="verification-info">
                                    <h5>Simulation Completed</h5>
                                    <p>Completed AI-driven project simulation. Realistic conditions, controlled environment.</p>
                                    <span class="verification-source">Source: Self-assessment</span>
                                </div>
                            </div>
                            <div class="verification-card verified">
                                <div class="verification-badge">V</div>
                                <div class="verification-info">
                                    <h5>Project Verified</h5>
                                    <p>Proven through actual client work. The gold standard for credentialing.</p>
                                    <span class="verification-source">Source: Real projects</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Self-Assessment Pathways -->
                    <div class="self-assessment-section">
                        <h4>Self-Assessment Pathways</h4>
                        <p class="section-desc">Build your credentials before getting matched to real projects. These help us (and clients) trust your capabilities.</p>

                        <div class="pathway-cards">
                            <div class="pathway-card">
                                <div class="pathway-icon">📝</div>
                                <div class="pathway-content">
                                    <h5>Knowledge Tests</h5>
                                    <p>Multiple-choice questions testing theoretical knowledge in each specialization.</p>
                                    <ul class="pathway-details">
                                        <li>20-30 questions per specialization</li>
                                        <li>Tests concepts, best practices, terminology</li>
                                        <li>Pass threshold: 80%</li>
                                        <li>Can retake after 7 days</li>
                                    </ul>
                                    <div class="pathway-outcome">
                                        <span class="outcome-label">Outcome:</span>
                                        <span class="verification-tag knowledge">Knowledge Verified</span>
                                    </div>
                                </div>
                            </div>

                            <div class="pathway-card">
                                <div class="pathway-icon">📁</div>
                                <div class="pathway-content">
                                    <h5>Portfolio Submission</h5>
                                    <p>Upload a deliverable you've created (past work, practice, personal projects).</p>
                                    <ul class="pathway-details">
                                        <li>AI grades on relevant dimensions</li>
                                        <li>Detailed feedback provided</li>
                                        <li>Context may be incomplete (we note this)</li>
                                        <li>Can submit multiple samples</li>
                                    </ul>
                                    <div class="pathway-outcome">
                                        <span class="outcome-label">Outcome:</span>
                                        <span class="verification-tag portfolio">Portfolio Graded</span>
                                        <span class="outcome-note">+ AI score on dimensions</span>
                                    </div>
                                </div>
                            </div>

                            <div class="pathway-card featured">
                                <div class="pathway-icon">🎮</div>
                                <div class="pathway-content">
                                    <h5>Project Simulation</h5>
                                    <p>Complete a realistic project where AI acts as the client and project manager.</p>
                                    <ul class="pathway-details">
                                        <li>Realistic brief with constraints and timeline</li>
                                        <li>AI asks clarifying questions, gives feedback</li>
                                        <li>Simulates back-and-forth of real engagement</li>
                                        <li>Full dimensional scoring on completion</li>
                                    </ul>
                                    <div class="pathway-outcome">
                                        <span class="outcome-label">Outcome:</span>
                                        <span class="verification-tag simulation">Simulation Completed</span>
                                        <span class="outcome-note">+ detailed performance report</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Level Confirmation -->
                    <div class="level-confirmation-section">
                        <h4>Level Confirmation Process</h4>
                        <div class="confirmation-timeline">
                            <div class="timeline-phase">
                                <div class="phase-marker provisional">P</div>
                                <div class="phase-content">
                                    <strong>Provisional (0-50 hours)</strong>
                                    <p>Initial level from interview. Can be matched to projects but flagged as provisional to internal team.</p>
                                </div>
                            </div>
                            <div class="timeline-connector">
                                <span class="connector-label">After 50 hours of real work</span>
                            </div>
                            <div class="timeline-phase">
                                <div class="phase-marker review">R</div>
                                <div class="phase-content">
                                    <strong>Review Point</strong>
                                    <p>Gratia reviews real project performance. Level may be confirmed, adjusted up, or adjusted down.</p>
                                    <ul class="review-factors">
                                        <li>First-submission scores across projects</li>
                                        <li>Substantive revision rates (excludes minor polish)</li>
                                        <li>Client and PM feedback</li>
                                        <li>Comparison to interview assessment</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="timeline-connector"></div>
                            <div class="timeline-phase">
                                <div class="phase-marker verified">V</div>
                                <div class="phase-content">
                                    <strong>Confirmed Level</strong>
                                    <p>Level now backed by real project data. Ongoing AQS tracking continues.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Not Yet Assessed -->
                    <div class="not-assessed-section">
                        <h4>Handling "Not Yet Assessed" Areas</h4>
                        <p>Some capabilities can't be assessed in interviews. These show as "Not Yet Assessed" until the analyst demonstrates them:</p>
                        <div class="nya-examples">
                            <div class="nya-item">
                                <span class="nya-label">Specializations without hours</span>
                                <span class="nya-status">NYA until first project or simulation</span>
                            </div>
                            <div class="nya-item">
                                <span class="nya-label">Advanced deliverable types</span>
                                <span class="nya-status">NYA until demonstrated in portfolio/simulation/project</span>
                            </div>
                            <div class="nya-item">
                                <span class="nya-label">Client-facing communication</span>
                                <span class="nya-status">NYA until real project with client interaction</span>
                            </div>
                        </div>
                        <p class="nya-note">Analysts can use self-assessment pathways to move from "Not Yet Assessed" to at least "Simulation Completed" — making them matchable for real work.</p>
                    </div>
                </div>

                <!-- AQS Calculator Panel -->
                <div id="aqs-panel" class="assessment-panel">
                    <div class="aqs-explainer">
                        <h3>Analyst Quality Score (AQS)</h3>
                        <p>Your AQS is a rolling 90-day performance metric combining AI-assessed and human-inputted data:</p>
                        <div class="aqs-formula">
                            <div class="formula-part accuracy">
                                <span class="weight">35%</span>
                                <span class="label">Work Quality</span>
                                <span class="detail">First-submission score + substantive revision rate</span>
                                <span class="source">AI-assessed</span>
                            </div>
                            <span class="plus">+</span>
                            <div class="formula-part delivery">
                                <span class="weight">20%</span>
                                <span class="label">Delivery</span>
                                <span class="detail">On-time rate (PM-reported)</span>
                                <span class="source">PM input</span>
                            </div>
                            <span class="plus">+</span>
                            <div class="formula-part professionalism">
                                <span class="weight">25%</span>
                                <span class="label">Satisfaction</span>
                                <span class="detail">Client + PM + peer feedback</span>
                                <span class="source">Human input</span>
                            </div>
                            <span class="plus">+</span>
                            <div class="formula-part standards">
                                <span class="weight">20%</span>
                                <span class="label">Gratia Standards</span>
                                <span class="detail">Time logging, updates, process</span>
                                <span class="source">System data</span>
                            </div>
                        </div>
                    </div>

                    <div class="calculator-layout">
                        <div class="calc-inputs">
                            <div class="calc-section">
                                <div class="calc-section-header">
                                    <h4>Work Quality (35%)</h4>
                                    <span class="source-badge ai">AI-assessed</span>
                                </div>
                                <div class="calc-input">
                                    <label>Avg First-Submission Score (1-5)</label>
                                    <input type="range" id="firstSubmissionScore" min="1" max="5" step="0.1" value="3.5">
                                    <span id="firstSubmissionScoreValue">3.5</span>
                                </div>
                                <div class="calc-input">
                                    <label>No Substantive Revision Rate</label>
                                    <input type="range" id="zeroRevisionRate" min="0" max="100" value="60">
                                    <span id="zeroRevisionRateValue">60%</span>
                                    <span class="input-hint">% of deliverables with no substantive issues</span>
                                </div>
                                <div class="calc-input">
                                    <label>Avg Substantive Revisions</label>
                                    <input type="range" id="avgRevisions" min="0" max="3" step="0.1" value="0.8">
                                    <span id="avgRevisionsValue">0.8</span>
                                    <span class="input-hint">Excludes minor polish (copy, formatting)</span>
                                </div>
                            </div>
                            <div class="calc-section">
                                <div class="calc-section-header">
                                    <h4>Delivery (20%)</h4>
                                    <span class="source-badge pm">PM input</span>
                                </div>
                                <div class="calc-input">
                                    <label>On-Time Rate</label>
                                    <input type="range" id="onTimeRate" min="0" max="100" value="90">
                                    <span id="onTimeRateValue">90%</span>
                                </div>
                            </div>
                            <div class="calc-section">
                                <div class="calc-section-header">
                                    <h4>Satisfaction (25%)</h4>
                                    <span class="source-badge human">Human input</span>
                                </div>
                                <div class="calc-input">
                                    <label>Client Rating (1-5)</label>
                                    <input type="range" id="clientFeedback" min="1" max="5" step="0.1" value="4.2">
                                    <span id="clientFeedbackValue">4.2</span>
                                </div>
                                <div class="calc-input">
                                    <label>PM Rating (1-5)</label>
                                    <input type="range" id="pmFeedback" min="1" max="5" step="0.1" value="4.0">
                                    <span id="pmFeedbackValue">4.0</span>
                                </div>
                                <div class="calc-input">
                                    <label>Peer Rating (1-5, optional)</label>
                                    <input type="range" id="peerFeedback" min="1" max="5" step="0.1" value="4.0">
                                    <span id="peerFeedbackValue">4.0</span>
                                </div>
                            </div>
                            <div class="calc-section">
                                <div class="calc-section-header">
                                    <h4>Gratia Standards (20%)</h4>
                                    <span class="source-badge system">System data</span>
                                </div>
                                <div class="calc-input">
                                    <label>Time Logging Compliance</label>
                                    <input type="range" id="timeLogging" min="0" max="100" value="95">
                                    <span id="timeLoggingValue">95%</span>
                                </div>
                                <div class="calc-input">
                                    <label>Daily Updates Sent</label>
                                    <input type="range" id="dailyUpdates" min="0" max="100" value="90">
                                    <span id="dailyUpdatesValue">90%</span>
                                </div>
                                <div class="calc-input">
                                    <label>Process Adherence</label>
                                    <input type="range" id="processAdherence" min="0" max="100" value="85">
                                    <span id="processAdherenceValue">85%</span>
                                </div>
                            </div>
                        </div>
                        <div class="calc-result">
                            <div class="aqs-gauge">
                                <svg viewBox="0 0 200 200">
                                    <circle cx="100" cy="100" r="90" fill="none" stroke="#e5e7eb" stroke-width="12"/>
                                    <circle id="aqsProgress" cx="100" cy="100" r="90" fill="none" stroke="var(--primary)" stroke-width="12"
                                        stroke-dasharray="565.48" stroke-dashoffset="113" stroke-linecap="round"
                                        transform="rotate(-90 100 100)"/>
                                </svg>
                                <div class="aqs-score-display">
                                    <span class="aqs-number" id="aqsScore">84</span>
                                    <span class="aqs-label">AQS</span>
                                </div>
                            </div>
                            <div class="aqs-level-indicator">
                                <span class="current-level" id="aqsLevelIndicator">A2 Level</span>
                                <span class="level-range" id="aqsLevelRange">80-90 range</span>
                            </div>
                            <div class="aqs-breakdown">
                                <div class="breakdown-item">
                                    <span class="breakdown-label">Quality</span>
                                    <span class="breakdown-value" id="breakdownQualityValue">30</span>
                                </div>
                                <div class="breakdown-item">
                                    <span class="breakdown-label">Delivery</span>
                                    <span class="breakdown-value" id="breakdownDeliveryValue">18</span>
                                </div>
                                <div class="breakdown-item">
                                    <span class="breakdown-label">Satisfaction</span>
                                    <span class="breakdown-value" id="breakdownSatisfactionValue">21</span>
                                </div>
                                <div class="breakdown-item">
                                    <span class="breakdown-label">Standards</span>
                                    <span class="breakdown-value" id="breakdownStandardsValue">17</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quality Review Panel -->
                <div id="quality-panel" class="assessment-panel">
                    <div class="quality-explainer">
                        <h3>AI Quality Review</h3>
                        <p>AI reviews every deliverable on 8 dimensions. The <strong>first-submission score</strong> (before any feedback) is what counts for AQS — this measures true independent capability. Only <strong>substantive issues</strong> (missing requirements, errors, methodology) count as revisions; minor polish (copy tightening, formatting) does not.</p>
                    </div>

                    <div class="review-workflow">
                        <h4>Review Workflow</h4>
                        <div class="workflow-diagram">
                            <div class="workflow-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <strong>Analyst Submits</strong>
                                    <p>First draft of deliverable</p>
                                </div>
                            </div>
                            <div class="workflow-arrow">→</div>
                            <div class="workflow-step highlight">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <strong>AI Scores</strong>
                                    <p>First-submission score recorded</p>
                                    <span class="step-badge">This feeds AQS</span>
                                </div>
                            </div>
                            <div class="workflow-arrow">→</div>
                            <div class="workflow-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <strong>AI Gives Feedback</strong>
                                    <p>Detailed improvement notes</p>
                                </div>
                            </div>
                            <div class="workflow-arrow">→</div>
                            <div class="workflow-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <strong>Substantive Revision</strong>
                                    <p>Real issues only (not minor polish)</p>
                                    <span class="step-badge warn">Only substantive revisions count</span>
                                </div>
                            </div>
                            <div class="workflow-arrow">→</div>
                            <div class="workflow-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <strong>Client Delivery</strong>
                                    <p>When avg ≥ 3.5</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="quality-layout">
                        <div class="quality-dimensions-panel">
                            <div class="dimension-selector">
                                <label>Select Specialization to see dimensions</label>
                                <select id="qualitySpecSelect" class="form-select">
                                    <option value="financial">Financial Models</option>
                                    <option value="pitch">Pitch Decks</option>
                                    <option value="research">Market Research</option>
                                    <option value="dashboards">Dashboards</option>
                                    <option value="process">Process Optimization</option>
                                    <option value="pm">Project Management</option>
                                    <option value="proposals">Proposals</option>
                                    <option value="revops">RevOps & GTM</option>
                                    <option value="strategy">Business Strategy</option>
                                </select>
                            </div>

                            <div class="dimensions-list">
                                <h4>Universal Dimensions (all deliverables)</h4>
                                <div class="dimension-group universal" id="universalDimensions">
                                    <!-- Populated by JS -->
                                </div>

                                <h4>Specialization-Specific</h4>
                                <div class="dimension-group specific" id="specificDimensions">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                        </div>

                        <div class="quality-feedback-panel">
                            <div class="score-scale">
                                <h4>Scoring Scale</h4>
                                <div class="scale-items">
                                    <div class="scale-item"><span class="score score-1">1</span> Unacceptable — Major issues, restart</div>
                                    <div class="scale-item"><span class="score score-2">2</span> Below Standard — Significant gaps</div>
                                    <div class="scale-item"><span class="score score-3">3</span> Meets Standard — Acceptable</div>
                                    <div class="scale-item"><span class="score score-4">4</span> Above Standard — Good quality</div>
                                    <div class="scale-item"><span class="score score-5">5</span> Exceptional — Reference quality</div>
                                </div>
                            </div>

                            <div class="review-outcomes">
                                <h4>First-Submission Outcomes</h4>
                                <div class="outcome-items">
                                    <div class="outcome exceeded"><span class="outcome-badge">Excellent</span> Avg 4.5+ — No substantive issues</div>
                                    <div class="outcome passed"><span class="outcome-badge">Good</span> Avg 3.5-4.5 — Minor polish only (doesn't count as revision)</div>
                                    <div class="outcome revise"><span class="outcome-badge">Needs Work</span> Avg 2.5-3.5 — Substantive revision required</div>
                                    <div class="outcome restart"><span class="outcome-badge">Restart</span> Avg &lt;2.5 — Fundamental issues</div>
                                </div>
                            </div>

                            <div class="pattern-tracking">
                                <h4>Pattern Tracking</h4>
                                <p>AI aggregates dimension scores over time. When patterns emerge:</p>
                                <div class="pattern-example">
                                    <div class="pattern-alert">
                                        <span class="alert-icon">⚠️</span>
                                        <div class="alert-content">
                                            <strong>Low scores on "Sample Validity"</strong>
                                            <p>3 of last 5 research deliverables scored &lt;3 on this dimension</p>
                                            <a href="#" class="alert-action">View upskilling resources →</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Simulator Panel -->
                <div id="simulator-panel" class="assessment-panel">
                    <div class="simulator-layout">
                        <div class="sim-profile-panel">
                            <h3>Analyst Profile</h3>
                            <div class="sim-profile-form">
                                <div class="sim-avatar" id="simAvatar">JD</div>
                                <div class="sim-fields">
                                    <div class="form-row">
                                        <label>Name</label>
                                        <input type="text" id="simName" value="Jane Doe" class="form-input">
                                    </div>
                                    <div class="form-row">
                                        <label>Current Level</label>
                                        <select id="simLevel" class="form-select">
                                            <option value="A1">A1 - Apprentice Business Analyst</option>
                                            <option value="A2" selected>A2 - Associate Business Analyst</option>
                                            <option value="A3">A3 - Business Analyst</option>
                                            <option value="A4">A4 - Senior Business Analyst</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="sim-hours">
                                <h4>Specialization Hours</h4>
                                <div class="hours-inputs" id="simHoursInputs">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                        </div>

                        <div class="sim-projects-panel">
                            <div class="panel-header">
                                <h3>Recent Projects</h3>
                                <button class="btn-secondary btn-small" id="randomizeProjects">Randomize</button>
                            </div>
                            <div class="sim-project-list" id="simProjectList">
                                <!-- Populated by JS -->
                            </div>
                            <div class="project-summary">
                                <div class="summary-stat">
                                    <span class="stat-value" id="simAvgReview">3.8</span>
                                    <span class="stat-label">Avg Review</span>
                                </div>
                                <div class="summary-stat">
                                    <span class="stat-value" id="simPassRate">75%</span>
                                    <span class="stat-label">Pass Rate</span>
                                </div>
                                <div class="summary-stat">
                                    <span class="stat-value" id="simOnTimeRate">88%</span>
                                    <span class="stat-label">On-Time</span>
                                </div>
                                <div class="summary-stat">
                                    <span class="stat-value" id="simAvgRating">4.2</span>
                                    <span class="stat-label">Client</span>
                                </div>
                            </div>
                        </div>

                        <div class="sim-results-panel">
                            <h3>Evaluation</h3>
                            <div class="sim-result-card">
                                <span class="result-label">Calculated AQS</span>
                                <span class="result-value" id="simAQS">84</span>
                            </div>
                            <div class="sim-result-card">
                                <span class="result-label">Performance Level</span>
                                <span class="result-value" id="simPerfLevel">A2</span>
                            </div>
                            <div class="promo-section">
                                <h4>Progress to <span id="simNextLevel">A3</span></h4>
                                <div class="promo-bar">
                                    <div class="promo-fill" id="simPromoFill" style="width: 65%"></div>
                                </div>
                                <div class="promo-requirements" id="simPromoReqs">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                            <button class="btn-primary" id="runSimulation">Run Evaluation</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- STAFFING VIEW -->
            <section id="staffing-view" class="view">
                <div class="view-header">
                    <h1>Staffing</h1>
                    <p>Find the right analyst for your project based on level and specialization.</p>
                </div>

                <div class="staffing-layout">
                    <div class="staffing-filters">
                        <h3>Project Requirements</h3>
                        <div class="filter-group">
                            <label>Specialization</label>
                            <select id="staffing-spec" class="form-select">
                                <option value="financial">Financial Models</option>
                                <option value="pitch">Pitch Decks</option>
                                <option value="research">Market Research</option>
                                <option value="dashboards">Dashboards</option>
                                <option value="process">Process Optimization</option>
                                <option value="pm">Project Management</option>
                                <option value="proposals">Proposals</option>
                                <option value="revops">RevOps & GTM</option>
                                <option value="strategy">Business Strategy</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Minimum Spec Tier</label>
                            <select id="staffing-tier" class="form-select">
                                <option value="familiar">Familiar (SS 50+)</option>
                                <option value="proficient" selected>Proficient (SS 70+)</option>
                                <option value="expert">Expert (SS 85+)</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Minimum Level</label>
                            <select id="staffing-level" class="form-select">
                                <option value="A1">A1 - Apprentice</option>
                                <option value="A2" selected>A2 - Associate</option>
                                <option value="A3">A3 - Business Analyst</option>
                                <option value="A4">A4 - Senior</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Client Work Style <span class="optional-label">(optional)</span></label>
                            <select id="staffing-client-profile" class="form-select">
                                <option value="">— Don't filter by style —</option>
                                <option value="startup">Startup / Fast-paced</option>
                                <option value="enterprise">Enterprise / Process-driven</option>
                                <option value="consulting">Consulting firm</option>
                                <option value="creative">Creative / Agency</option>
                            </select>
                            <span class="filter-hint">From Principles Us assessment</span>
                        </div>
                        <button class="btn-primary" id="findAnalysts">Find Matches</button>
                    </div>

                    <div class="staffing-results">
                        <h3>Matching Analysts</h3>
                        <div id="staffingResults" class="analyst-results">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
// Gratia Skills Framework - Simplified Application

// ===== DATA =====

// Analyst Levels with Specialization Requirements
const levels = {
    A1: {
        name: 'Apprentice Business Analyst',
        aqs: '70-80',
        subtitle: 'Building foundations',
        specRequirements: { expert: 0, proficient: 0, familiar: 0 },
        specNote: 'Building first specialization'
    },
    A2: {
        name: 'Associate Business Analyst',
        aqs: '80-90',
        subtitle: 'Independent contributor',
        specRequirements: { expert: 0, proficient: 1, familiar: 1 },
        specNote: '1+ Proficient required'
    },
    A3: {
        name: 'Business Analyst',
        aqs: '90-95',
        subtitle: 'Strategic problem-solver',
        specRequirements: { expert: 1, proficient: 2, familiar: 0 },
        specNote: '1+ Expert, 2+ Proficient required'
    },
    A4: {
        name: 'Senior Business Analyst',
        aqs: '95+',
        subtitle: 'Expert & trusted advisor',
        specRequirements: { expert: 2, proficient: 3, familiar: 0 },
        specNote: '2+ Expert, 3+ Proficient required'
    }
};

// Psychometric Profiles (from Principles Us assessment)
// Used for team forming and client-analyst fit - additional signal, not a hard filter
const psychometricDimensions = {
    workStyle: {
        name: 'Work Style',
        description: 'How they approach tasks and solve problems',
        spectrum: ['Methodical', 'Adaptive'],
        explanation: 'Methodical: Structured, follows process, thorough. Adaptive: Flexible, improvises, iterates quickly.'
    },
    communication: {
        name: 'Communication',
        description: 'How they prefer to interact and share information',
        spectrum: ['Direct', 'Diplomatic'],
        explanation: 'Direct: Gets to the point, values efficiency. Diplomatic: Builds context, considers feelings.'
    },
    decisionMaking: {
        name: 'Decision Making',
        description: 'How they process information and make choices',
        spectrum: ['Analytical', 'Intuitive'],
        explanation: 'Analytical: Data-driven, systematic evaluation. Intuitive: Pattern recognition, gut checks.'
    },
    collaboration: {
        name: 'Collaboration',
        description: 'How they work with others',
        spectrum: ['Independent', 'Collaborative'],
        explanation: 'Independent: Heads-down focus, async communication. Collaborative: Frequent check-ins, real-time discussion.'
    },
    riskTolerance: {
        name: 'Risk Tolerance',
        description: 'How they handle uncertainty and ambiguity',
        spectrum: ['Conservative', 'Bold'],
        explanation: 'Conservative: Validates assumptions, minimizes risk. Bold: Comfortable with uncertainty, moves fast.'
    },
    feedback: {
        name: 'Feedback Style',
        description: 'How they give and receive feedback',
        spectrum: ['Candid', 'Supportive'],
        explanation: 'Candid: Direct critique, focuses on improvement. Supportive: Encouraging, balances positive/negative.'
    }
};

// Pre-defined psychometric profiles for common client/project types
const clientProfileTemplates = {
    startup: {
        name: 'Startup / Fast-paced',
        preferences: {
            workStyle: 0.7,        // Lean adaptive
            communication: 0.4,    // Slightly direct
            decisionMaking: 0.6,   // Balanced, slight intuitive
            collaboration: 0.7,    // More collaborative
            riskTolerance: 0.8,    // Bold
            feedback: 0.4          // Candid
        }
    },
    enterprise: {
        name: 'Enterprise / Process-driven',
        preferences: {
            workStyle: 0.3,        // Methodical
            communication: 0.6,    // Diplomatic
            decisionMaking: 0.3,   // Analytical
            collaboration: 0.5,    // Balanced
            riskTolerance: 0.2,    // Conservative
            feedback: 0.6          // Supportive
        }
    },
    consulting: {
        name: 'Consulting firm',
        preferences: {
            workStyle: 0.4,        // Structured but flexible
            communication: 0.3,    // Direct
            decisionMaking: 0.3,   // Very analytical
            collaboration: 0.6,    // Collaborative
            riskTolerance: 0.4,    // Moderate
            feedback: 0.3          // Candid
        }
    },
    creative: {
        name: 'Creative / Agency',
        preferences: {
            workStyle: 0.8,        // Adaptive
            communication: 0.5,    // Balanced
            decisionMaking: 0.7,   // Intuitive
            collaboration: 0.8,    // Very collaborative
            riskTolerance: 0.7,    // Bold
            feedback: 0.5          // Balanced
        }
    }
};

// Underlying Skills (granular abilities that map to specializations)
const underlyingSkills = {
    quantitative: {
        id: 'quantitative',
        name: 'Quantitative Reasoning',
        icon: '🔢',
        description: 'Numbers, calculations, formulas, financial math'
    },
    dataAnalysis: {
        id: 'dataAnalysis',
        name: 'Data Analysis',
        icon: '📊',
        description: 'Interpreting data, finding patterns, statistical thinking'
    },
    storytelling: {
        id: 'storytelling',
        name: 'Storytelling & Narrative',
        icon: '📖',
        description: 'Crafting compelling narratives, logical flow, persuasion'
    },
    visualDesign: {
        id: 'visualDesign',
        name: 'Visual Design',
        icon: '🎨',
        description: 'Layouts, charts, aesthetics, visual hierarchy'
    },
    research: {
        id: 'research',
        name: 'Research & Synthesis',
        icon: '🔍',
        description: 'Finding information, evaluating sources, synthesizing insights'
    },
    technicalWriting: {
        id: 'technicalWriting',
        name: 'Technical Writing',
        icon: '✍️',
        description: 'Clear documentation, structured communication, precision'
    },
    strategicThinking: {
        id: 'strategicThinking',
        name: 'Strategic Thinking',
        icon: '🧭',
        description: 'Big picture, frameworks, connecting dots, business logic'
    },
    processDesign: {
        id: 'processDesign',
        name: 'Process & Systems',
        icon: '⚙️',
        description: 'Workflows, automation, efficiency, systematic thinking'
    },
    clientManagement: {
        id: 'clientManagement',
        name: 'Client Management',
        icon: '🤝',
        description: 'Relationship building, expectation setting, communication'
    },
    projectCoordination: {
        id: 'projectCoordination',
        name: 'Project Coordination',
        icon: '📋',
        description: 'Timelines, resources, tracking, stakeholder alignment'
    }
};

// Core Competencies (what A1-A4 levels are assessed on)
const competencies = [
    {
        id: 'decision',
        name: 'Decision Excellence',
        icon: '🎯',
        description: 'Analyze complex challenges, structure problems, and develop actionable solutions.',
        A1: 'Executes defined analyses with guidance',
        A2: 'Structures problems independently, delivers clear insights',
        A3: 'Diagnoses problems, designs approaches, anticipates needs',
        A4: 'Defines frameworks for novel problems, go-to for complex challenges'
    },
    {
        id: 'business',
        name: 'Business Acumen',
        icon: '💼',
        description: 'Understand business fundamentals, industry dynamics, and commercial implications.',
        A1: 'Basic understanding of business concepts',
        A2: 'Solid grasp of business models, connects analysis to outcomes',
        A3: 'Deep strategic thinking, advises on business logic',
        A4: 'Industry expert, consults at CEO/board level'
    },
    {
        id: 'execution',
        name: 'Execution Mastery',
        icon: '⚡',
        description: 'Deliver high-quality work through structured planning and execution control.',
        A1: 'Completes tasks with supervision, work needs review',
        A2: 'Delivers quality work on time, consistently passes AI review',
        A3: 'Reference-quality work, anticipates edge cases, rarely needs revision',
        A4: 'Every deliverable is exemplar, creates standards for others'
    },
    {
        id: 'stakeholder',
        name: 'Stakeholder Impact',
        icon: '🤝',
        description: 'Present insights effectively, influence decisions, and build strong relationships.',
        A1: 'Professional but needs coaching on tone',
        A2: 'Clear communicator, handles calls independently',
        A3: 'Leads client relationships, VP/C-suite presence',
        A4: 'Executive presence, board-level relationships'
    },
    {
        id: 'flexibility',
        name: 'Flexibility & Agility',
        icon: '🔄',
        description: 'Pivot strategies, absorb feedback, and remain effective amid change.',
        A1: 'Adapts with guidance, steep learning curve on new tools',
        A2: 'Adapts smoothly to changes, learns new tools quickly',
        A3: 'Thrives in ambiguity, self-corrects, takes initiative',
        A4: 'Operates in any domain, creates solutions where none exist'
    }
];

// Specializations with complexity tiers
const specializations = {
    financial: {
        name: 'Financial Models & Consulting',
        icon: '📊',
        description: 'Build integrated financial models, valuations, and forecasting dashboards.',
        // Skills mapping: primary (essential) and secondary (helpful)
        skillsRequired: {
            primary: ['quantitative', 'dataAnalysis'],
            secondary: ['strategicThinking', 'technicalWriting']
        },
        methods: [
            'Business Planning & Financial Modeling',
            'Scenario & Forecasting Dashboards',
            'Company & Asset Valuation',
            'Advanced Financial Analysis'
        ],
        skills: [
            '3-Statement models (P&L, Balance Sheet, Cash Flow)',
            'DCF analysis (FCFF and FCFE)',
            'WACC calculation & cost of capital',
            'Comparable company analysis',
            'LBO and M&A modeling',
            'Monte Carlo simulation',
            'Sensitivity tables & data tables'
        ],
        deliverables: {
            basic: ['Budget templates', 'Simple forecasts', 'Revenue projections', 'Cost analysis'],
            intermediate: ['3-statement models', 'Scenario analysis', 'Cash flow modeling', 'Variance analysis'],
            advanced: ['DCF valuations', 'LBO models', 'M&A analysis', 'Monte Carlo simulations']
        }
    },
    pitch: {
        name: 'Pitch & Consulting Decks',
        icon: '📑',
        description: 'Create compelling investor presentations and strategic narratives.',
        skillsRequired: {
            primary: ['storytelling', 'visualDesign'],
            secondary: ['strategicThinking', 'clientManagement']
        },
        methods: [
            'Investor & Fundraising Pitch Decks',
            'Board Meeting Presentations',
            'Executive Strategy Decks',
            'Visual Communication Design'
        ],
        skills: [
            'Investment thesis development',
            'Financial projections presentation',
            'Strategic framework application',
            'Storyline development & narrative arc',
            'Slide layout & visual hierarchy',
            'Chart selection & data visualization'
        ],
        deliverables: {
            basic: ['Company overviews', 'Product decks', 'Team presentations', 'Progress updates'],
            intermediate: ['Investor pitch decks', 'Board updates', 'Competitive positioning', 'Market narratives'],
            advanced: ['Series B+ fundraising', 'M&A presentations', 'IPO roadshows', 'Strategic repositioning']
        }
    },
    research: {
        name: 'Market Research',
        icon: '🔍',
        description: 'Conduct systematic market analysis and competitive intelligence.',
        skillsRequired: {
            primary: ['research', 'dataAnalysis'],
            secondary: ['technicalWriting', 'strategicThinking']
        },
        deliverables: {
            basic: ['Competitor profiles', 'Industry overviews', 'Basic market sizing', 'News synthesis'],
            intermediate: ['TAM/SAM/SOM analysis', 'Customer segmentation', 'Pricing research', 'Survey design'],
            advanced: ['Market entry strategy', 'Competitive intelligence', 'M&A due diligence', 'Industry white papers']
        }
    },
    dashboards: {
        name: 'Dashboards',
        icon: '📈',
        description: 'Build data visualizations and business intelligence reporting.',
        skillsRequired: {
            primary: ['dataAnalysis', 'visualDesign'],
            secondary: ['quantitative', 'processDesign']
        },
        deliverables: {
            basic: ['Excel dashboards', 'Basic charts', 'Status reports', 'KPI tracking'],
            intermediate: ['Tableau/Power BI dashboards', 'Automated reporting', 'Data blending', 'Drill-down analysis'],
            advanced: ['Predictive analytics', 'Real-time dashboards', 'Data warehouse design', 'ML-powered insights']
        }
    },
    process: {
        name: 'Process Optimization',
        icon: '⚙️',
        description: 'Improve workflows, implement automation, and drive efficiency.',
        skillsRequired: {
            primary: ['processDesign', 'technicalWriting'],
            secondary: ['dataAnalysis', 'projectCoordination']
        },
        deliverables: {
            basic: ['Process documentation', 'Workflow diagrams', 'SOP creation', 'Checklist design'],
            intermediate: ['Process mapping', 'Bottleneck analysis', 'Zapier/Make automation', 'Efficiency metrics'],
            advanced: ['Digital transformation', 'Six Sigma projects', 'Enterprise automation', 'Change management']
        }
    },
    pm: {
        name: 'Project Management',
        icon: '📋',
        description: 'Plan, execute, and deliver complex business initiatives.',
        skillsRequired: {
            primary: ['projectCoordination', 'clientManagement'],
            secondary: ['processDesign', 'technicalWriting']
        },
        deliverables: {
            basic: ['Task lists', 'Meeting coordination', 'Status updates', 'Timeline tracking'],
            intermediate: ['Project plans', 'Risk registers', 'Resource allocation', 'Stakeholder management'],
            advanced: ['Program management', 'PMO setup', 'Portfolio optimization', 'Transformation programs']
        }
    },
    proposals: {
        name: 'Proposals',
        icon: '📝',
        description: 'Develop compelling proposals, business cases, and RFP responses.',
        skillsRequired: {
            primary: ['technicalWriting', 'storytelling'],
            secondary: ['quantitative', 'research']
        },
        deliverables: {
            basic: ['Proposal templates', 'Cost estimates', 'Scope documents', 'Vendor comparisons'],
            intermediate: ['RFP responses', 'Business cases', 'ROI analysis', 'Investment memos'],
            advanced: ['Enterprise RFPs', 'Strategic business cases', 'Board-level recommendations', 'M&A proposals']
        }
    },
    revops: {
        name: 'RevOps & GTM',
        icon: '🚀',
        description: 'Optimize sales processes, CRM systems, and go-to-market strategies.',
        skillsRequired: {
            primary: ['processDesign', 'dataAnalysis'],
            secondary: ['strategicThinking', 'clientManagement']
        },
        deliverables: {
            basic: ['CRM data cleanup', 'Pipeline reports', 'Lead lists', 'Sales collateral'],
            intermediate: ['Sales process design', 'CRM configuration', 'Pipeline optimization', 'Territory planning'],
            advanced: ['GTM strategy', 'Revenue modeling', 'Sales transformation', 'Channel strategy']
        }
    },
    strategy: {
        name: 'Business Strategy',
        icon: '🎯',
        description: 'Develop corporate strategy and organizational transformation plans.',
        skillsRequired: {
            primary: ['strategicThinking', 'research'],
            secondary: ['storytelling', 'clientManagement']
        },
        deliverables: {
            basic: ['SWOT analysis', 'Competitive overviews', 'Strategic summaries', 'Research synthesis'],
            intermediate: ['Strategic frameworks', 'Business model analysis', 'Growth planning', 'Risk assessment'],
            advanced: ['Corporate strategy', 'M&A strategy', 'Board advisory', 'Turnaround planning']
        }
    }
};

// Specialization Score calculation
// SS = Hours (40%) + Quality (40%) + Complexity (20%)
function calculateSpecScore(hours, avgReviewScore, avgRating, complexityMix) {
    // Hours component (40%) - normalized to 100 at 500 hours
    const hoursScore = Math.min(100, (hours / 500) * 100);

    // Quality component (40%) - AI review scores + client rating
    // avgReviewScore is stored as percentage (0-100) representing pass rate
    const qualityScore = (avgReviewScore * 0.6) + ((avgRating / 5) * 100 * 0.4);

    // Complexity component (20%) - weighted by deliverable tier
    // complexityMix: { basic: %, intermediate: %, advanced: % }
    const complexityScore = (complexityMix.basic * 0.3) + (complexityMix.intermediate * 0.6) + (complexityMix.advanced * 1.0);

    return Math.round((hoursScore * 0.4) + (qualityScore * 0.4) + (complexityScore * 100 * 0.2));
}

// Get specialization tier based on SS
function getSpecTier(specScore) {
    if (specScore >= 85) return { tier: 'expert', label: 'Expert', color: 'tier-3' };
    if (specScore >= 70) return { tier: 'proficient', label: 'Proficient', color: 'tier-2' };
    if (specScore >= 50) return { tier: 'familiar', label: 'Familiar', color: 'tier-1' };
    return { tier: 'learning', label: 'Learning', color: 'tier-0' };
}

// ===== QUALITY ASSESSMENT SYSTEM =====
// Specialization-specific assessment dimensions (Option A + C)

const assessmentDimensions = {
    // Universal dimensions (apply to all)
    universal: [
        { id: 'completeness', name: 'Completeness', description: 'All brief requirements addressed' },
        { id: 'accuracy', name: 'Accuracy', description: 'Data, facts, and calculations verified' },
        { id: 'presentation', name: 'Presentation', description: 'Professional, clear, audience-appropriate' },
        { id: 'timeliness', name: 'Timeliness', description: 'Delivered on schedule with proper communication' }
    ],

    // Specialization-specific dimensions
    financial: [
        { id: 'formula_integrity', name: 'Formula Integrity', description: 'Formulas are correct, auditable, no circular refs' },
        { id: 'model_structure', name: 'Model Structure', description: 'Logical layout, clear assumptions, easy to navigate' },
        { id: 'scenario_coverage', name: 'Scenario Coverage', description: 'Appropriate sensitivity analysis and cases' },
        { id: 'assumption_documentation', name: 'Assumption Documentation', description: 'All assumptions clearly stated and sourced' }
    ],

    pitch: [
        { id: 'narrative_flow', name: 'Narrative Flow', description: 'Logical story arc, compelling progression' },
        { id: 'visual_design', name: 'Visual Design', description: 'Professional aesthetics, consistent branding' },
        { id: 'message_clarity', name: 'Key Message Clarity', description: 'Core points are unmistakable and memorable' },
        { id: 'data_visualization', name: 'Data Visualization', description: 'Charts support the narrative, easy to understand' }
    ],

    research: [
        { id: 'source_quality', name: 'Source Quality', description: 'Credible, recent, properly cited sources' },
        { id: 'methodology_rigor', name: 'Methodology Rigor', description: 'Appropriate research methods for the question' },
        { id: 'sample_validity', name: 'Sample Validity', description: 'Representative data, adequate sample size' },
        { id: 'insight_depth', name: 'Insight Depth', description: 'Beyond obvious conclusions, actionable findings' }
    ],

    dashboards: [
        { id: 'data_integrity', name: 'Data Integrity', description: 'Accurate data connections, proper refresh logic' },
        { id: 'visualization_clarity', name: 'Visualization Clarity', description: 'Right chart types, clear labels, no clutter' },
        { id: 'interactivity', name: 'Interactivity', description: 'Useful filters, drill-downs work correctly' },
        { id: 'performance', name: 'Performance', description: 'Loads quickly, handles data volume well' }
    ],

    process: [
        { id: 'current_state_accuracy', name: 'Current State Accuracy', description: 'Existing process correctly documented' },
        { id: 'gap_identification', name: 'Gap Identification', description: 'Bottlenecks and inefficiencies clearly identified' },
        { id: 'solution_feasibility', name: 'Solution Feasibility', description: 'Recommendations are practical and implementable' },
        { id: 'change_impact', name: 'Change Impact Assessment', description: 'Risks and dependencies properly considered' }
    ],

    pm: [
        { id: 'scope_definition', name: 'Scope Definition', description: 'Clear boundaries, deliverables well-defined' },
        { id: 'timeline_realism', name: 'Timeline Realism', description: 'Achievable milestones, dependencies mapped' },
        { id: 'risk_identification', name: 'Risk Identification', description: 'Potential issues anticipated with mitigations' },
        { id: 'stakeholder_alignment', name: 'Stakeholder Alignment', description: 'Right people informed, RACI clear' }
    ],

    proposals: [
        { id: 'problem_framing', name: 'Problem Framing', description: 'Issue clearly articulated, stakes established' },
        { id: 'solution_logic', name: 'Solution Logic', description: 'Recommendation follows from analysis' },
        { id: 'roi_substantiation', name: 'ROI Substantiation', description: 'Benefits quantified with credible assumptions' },
        { id: 'objection_handling', name: 'Objection Handling', description: 'Potential concerns preemptively addressed' }
    ],

    revops: [
        { id: 'process_alignment', name: 'Process Alignment', description: 'Sales stages match buyer journey' },
        { id: 'data_quality', name: 'Data Quality', description: 'CRM data is clean, consistent, complete' },
        { id: 'automation_logic', name: 'Automation Logic', description: 'Workflows trigger correctly, no gaps' },
        { id: 'metric_validity', name: 'Metric Validity', description: 'KPIs measure what matters, no vanity metrics' }
    ],

    strategy: [
        { id: 'framework_application', name: 'Framework Application', description: 'Strategic tools used appropriately' },
        { id: 'evidence_base', name: 'Evidence Base', description: 'Conclusions supported by data and analysis' },
        { id: 'strategic_coherence', name: 'Strategic Coherence', description: 'Recommendations align and reinforce each other' },
        { id: 'implementation_path', name: 'Implementation Path', description: 'Clear next steps, not just theory' }
    ]
};

// Get all dimensions for a specialization (universal + specific)
function getAssessmentDimensions(specKey) {
    return [
        ...assessmentDimensions.universal,
        ...(assessmentDimensions[specKey] || [])
    ];
}

// Sample deliverable assessment (what AI would produce)
function assessDeliverable(specKey, scores) {
    const dimensions = getAssessmentDimensions(specKey);
    const results = dimensions.map(dim => ({
        ...dim,
        score: scores[dim.id] || 0,
        passed: (scores[dim.id] || 0) >= 3
    }));

    const avgScore = results.reduce((sum, r) => sum + r.score, 0) / results.length;
    const failedDimensions = results.filter(r => !r.passed);

    return {
        dimensions: results,
        averageScore: avgScore,
        passed: avgScore >= 3 && failedDimensions.length <= 1,
        failedDimensions,
        recommendation: avgScore >= 4.5 ? 'exceeded' :
                       avgScore >= 3.5 ? 'passed' :
                       avgScore >= 2.5 ? 'revise' : 'restart'
    };
}

// ===== ANALYST FEEDBACK TRACKING =====
// Track dimension scores over time for upskilling insights

function analyzeWeaknesses(analyst, recentDeliverables = 10) {
    // This would aggregate scores from recent deliverables
    // and identify patterns of weakness
    const weaknesses = {};

    // Simulated analysis - in production this would query actual data
    // Returns dimensions where avg score < 3.5 across recent work
    return {
        patterns: [
            // Example output structure:
            // { dimension: 'sample_validity', avgScore: 2.8, occurrences: 4, trend: 'declining' },
            // { dimension: 'assumption_documentation', avgScore: 3.1, occurrences: 3, trend: 'stable' }
        ],
        recommendations: [
            // { skill: 'Research Methodology', priority: 'high', resources: [...] }
        ]
    };
}

// Check if analyst meets specialization requirements for a level
function meetsSpecRequirements(analyst, targetLevel) {
    const requirements = levels[targetLevel].specRequirements;
    const specCounts = { expert: 0, proficient: 0, familiar: 0 };

    Object.keys(analyst.specializations).forEach(specKey => {
        const score = getAnalystSpecScore(analyst, specKey);
        const tier = getSpecTier(score);
        if (tier.tier === 'expert') specCounts.expert++;
        else if (tier.tier === 'proficient') specCounts.proficient++;
        else if (tier.tier === 'familiar') specCounts.familiar++;
    });

    return {
        meets: specCounts.expert >= requirements.expert &&
               (specCounts.expert + specCounts.proficient) >= (requirements.expert + requirements.proficient),
        current: specCounts,
        required: requirements,
        gaps: {
            expert: Math.max(0, requirements.expert - specCounts.expert),
            proficient: Math.max(0, requirements.proficient - specCounts.proficient)
        }
    };
}

// Sample analysts with richer specialization data
// Each specialization includes: hours, gatePassRate, avgRating, complexityMix
const analysts = [
    {
        id: 1,
        name: 'Sarah Mitchell',
        initials: 'SM',
        level: 'A3',
        aqs: 92,
        availability: 'available',
        timezone: 'EST (UTC-5)',
        strengths: ['DCF & valuation expert', 'Fast turnaround', 'Strong client communication'],
        considerations: ['Prefers longer engagements', 'Limited availability in Q4'],
        recentWork: 'Series B financial model for fintech startup',
        // Psychometric profile (0 = left of spectrum, 1 = right)
        psychometrics: {
            workStyle: 0.35,       // Methodical-leaning
            communication: 0.4,    // Slightly direct
            decisionMaking: 0.25,  // Analytical
            collaboration: 0.6,    // Balanced, slight collaborative
            riskTolerance: 0.5,    // Balanced
            feedback: 0.35         // Candid-leaning
        },
        specializations: {
            financial: { hours: 620, gatePass: 94, rating: 4.7, complexity: { basic: 0.1, intermediate: 0.4, advanced: 0.5 } },
            pitch: { hours: 310, gatePass: 91, rating: 4.5, complexity: { basic: 0.2, intermediate: 0.5, advanced: 0.3 } },
            research: { hours: 240, gatePass: 88, rating: 4.4, complexity: { basic: 0.3, intermediate: 0.5, advanced: 0.2 } },
            dashboards: { hours: 85, gatePass: 85, rating: 4.2, complexity: { basic: 0.4, intermediate: 0.5, advanced: 0.1 } },
            process: { hours: 60, gatePass: 82, rating: 4.0, complexity: { basic: 0.5, intermediate: 0.4, advanced: 0.1 } },
            pm: { hours: 15, gatePass: 80, rating: 4.0, complexity: { basic: 0.8, intermediate: 0.2, advanced: 0 } },
            proposals: { hours: 95, gatePass: 88, rating: 4.3, complexity: { basic: 0.3, intermediate: 0.5, advanced: 0.2 } },
            revops: { hours: 10, gatePass: 75, rating: 3.8, complexity: { basic: 0.9, intermediate: 0.1, advanced: 0 } },
            strategy: { hours: 90, gatePass: 86, rating: 4.2, complexity: { basic: 0.4, intermediate: 0.4, advanced: 0.2 } }
        }
    },
    {
        id: 2,
        name: 'James Kim',
        initials: 'JK',
        level: 'A2',
        aqs: 84,
        availability: 'available',
        timezone: 'PST (UTC-8)',
        strengths: ['Dashboard wizard', 'SQL & data modeling', 'Detail-oriented'],
        considerations: ['Needs clear briefs', 'Less experience with investor-facing work'],
        recentWork: 'KPI dashboard for e-commerce platform',
        psychometrics: {
            workStyle: 0.2,        // Very methodical
            communication: 0.5,    // Balanced
            decisionMaking: 0.2,   // Very analytical
            collaboration: 0.3,    // Independent-leaning
            riskTolerance: 0.25,   // Conservative
            feedback: 0.5          // Balanced
        },
        specializations: {
            financial: { hours: 280, gatePass: 82, rating: 4.1, complexity: { basic: 0.3, intermediate: 0.5, advanced: 0.2 } },
            pitch: { hours: 95, gatePass: 78, rating: 3.9, complexity: { basic: 0.5, intermediate: 0.4, advanced: 0.1 } },
            research: { hours: 120, gatePass: 80, rating: 4.0, complexity: { basic: 0.4, intermediate: 0.5, advanced: 0.1 } },
            dashboards: { hours: 210, gatePass: 85, rating: 4.3, complexity: { basic: 0.2, intermediate: 0.6, advanced: 0.2 } },
            process: { hours: 25, gatePass: 75, rating: 3.8, complexity: { basic: 0.7, intermediate: 0.3, advanced: 0 } },
            pm: { hours: 65, gatePass: 78, rating: 3.9, complexity: { basic: 0.5, intermediate: 0.4, advanced: 0.1 } },
            proposals: { hours: 40, gatePass: 76, rating: 3.8, complexity: { basic: 0.6, intermediate: 0.4, advanced: 0 } },
            revops: { hours: 55, gatePass: 80, rating: 4.0, complexity: { basic: 0.5, intermediate: 0.4, advanced: 0.1 } },
            strategy: { hours: 30, gatePass: 74, rating: 3.7, complexity: { basic: 0.7, intermediate: 0.3, advanced: 0 } }
        }
    },
    {
        id: 3,
        name: 'Emily Rodriguez',
        initials: 'ER',
        level: 'A3',
        aqs: 91,
        availability: 'limited',
        timezone: 'CET (UTC+1)',
        strengths: ['Exceptional storytelling', 'Board-level presentations', 'Strategic thinker'],
        considerations: ['Currently on retainer (15hrs/wk available)', 'Premium rate'],
        recentWork: 'GTM strategy for enterprise SaaS expansion',
        psychometrics: {
            workStyle: 0.7,        // Adaptive
            communication: 0.65,   // Diplomatic-leaning
            decisionMaking: 0.6,   // Balanced, slight intuitive
            collaboration: 0.75,   // Collaborative
            riskTolerance: 0.6,    // Moderate-bold
            feedback: 0.7          // Supportive-leaning
        },
        specializations: {
            financial: { hours: 85, gatePass: 84, rating: 4.2, complexity: { basic: 0.4, intermediate: 0.5, advanced: 0.1 } },
            pitch: { hours: 520, gatePass: 93, rating: 4.6, complexity: { basic: 0.1, intermediate: 0.4, advanced: 0.5 } },
            research: { hours: 480, gatePass: 91, rating: 4.5, complexity: { basic: 0.2, intermediate: 0.4, advanced: 0.4 } },
            dashboards: { hours: 75, gatePass: 82, rating: 4.1, complexity: { basic: 0.5, intermediate: 0.4, advanced: 0.1 } },
            process: { hours: 195, gatePass: 87, rating: 4.3, complexity: { basic: 0.3, intermediate: 0.5, advanced: 0.2 } },
            pm: { hours: 220, gatePass: 89, rating: 4.4, complexity: { basic: 0.2, intermediate: 0.5, advanced: 0.3 } },
            proposals: { hours: 180, gatePass: 88, rating: 4.3, complexity: { basic: 0.3, intermediate: 0.5, advanced: 0.2 } },
            revops: { hours: 450, gatePass: 90, rating: 4.5, complexity: { basic: 0.2, intermediate: 0.4, advanced: 0.4 } },
            strategy: { hours: 260, gatePass: 89, rating: 4.4, complexity: { basic: 0.3, intermediate: 0.4, advanced: 0.3 } }
        }
    },
    {
        id: 4,
        name: 'Michael Chen',
        initials: 'MC',
        level: 'A1',
        aqs: 75,
        availability: 'available',
        timezone: 'EST (UTC-5)',
        strengths: ['Eager learner', 'Strong Excel fundamentals', 'Responsive'],
        considerations: ['Requires supervision', 'Best for well-defined tasks', 'Still building portfolio'],
        recentWork: 'Budget template for seed-stage startup',
        psychometrics: {
            workStyle: 0.4,        // Slightly methodical
            communication: 0.5,    // Balanced
            decisionMaking: 0.4,   // Slightly analytical
            collaboration: 0.65,   // Collaborative-leaning
            riskTolerance: 0.35,   // Conservative-leaning
            feedback: 0.6          // Balanced, open to input
        },
        specializations: {
            financial: { hours: 35, gatePass: 68, rating: 3.5, complexity: { basic: 0.8, intermediate: 0.2, advanced: 0 } },
            pitch: { hours: 20, gatePass: 65, rating: 3.4, complexity: { basic: 0.9, intermediate: 0.1, advanced: 0 } },
            research: { hours: 55, gatePass: 72, rating: 3.7, complexity: { basic: 0.7, intermediate: 0.3, advanced: 0 } },
            dashboards: { hours: 80, gatePass: 75, rating: 3.8, complexity: { basic: 0.6, intermediate: 0.4, advanced: 0 } },
            process: { hours: 15, gatePass: 65, rating: 3.4, complexity: { basic: 0.9, intermediate: 0.1, advanced: 0 } },
            pm: { hours: 10, gatePass: 62, rating: 3.3, complexity: { basic: 1.0, intermediate: 0, advanced: 0 } },
            proposals: { hours: 5, gatePass: 60, rating: 3.2, complexity: { basic: 1.0, intermediate: 0, advanced: 0 } },
            revops: { hours: 8, gatePass: 64, rating: 3.4, complexity: { basic: 1.0, intermediate: 0, advanced: 0 } },
            strategy: { hours: 12, gatePass: 66, rating: 3.5, complexity: { basic: 0.9, intermediate: 0.1, advanced: 0 } }
        }
    },
    {
        id: 5,
        name: 'Aisha Thompson',
        initials: 'AT',
        level: 'A4',
        aqs: 96,
        availability: 'available',
        timezone: 'GMT (UTC+0)',
        strengths: ['Top-tier across all specializations', 'C-suite experience', 'Can mentor junior analysts'],
        considerations: ['Premium rate tier', 'High demand - book early', 'Best for strategic engagements'],
        recentWork: 'M&A due diligence for PE acquisition',
        psychometrics: {
            workStyle: 0.5,        // Balanced - can adapt to client
            communication: 0.45,   // Balanced, slightly direct
            decisionMaking: 0.4,   // Analytical-leaning
            collaboration: 0.55,   // Balanced
            riskTolerance: 0.55,   // Balanced
            feedback: 0.4          // Candid-leaning
        },
        specializations: {
            financial: { hours: 850, gatePass: 97, rating: 4.9, complexity: { basic: 0.05, intermediate: 0.25, advanced: 0.7 } },
            pitch: { hours: 720, gatePass: 96, rating: 4.8, complexity: { basic: 0.1, intermediate: 0.3, advanced: 0.6 } },
            research: { hours: 680, gatePass: 95, rating: 4.8, complexity: { basic: 0.1, intermediate: 0.3, advanced: 0.6 } },
            dashboards: { hours: 280, gatePass: 92, rating: 4.6, complexity: { basic: 0.2, intermediate: 0.4, advanced: 0.4 } },
            process: { hours: 510, gatePass: 94, rating: 4.7, complexity: { basic: 0.1, intermediate: 0.4, advanced: 0.5 } },
            pm: { hours: 620, gatePass: 95, rating: 4.8, complexity: { basic: 0.1, intermediate: 0.3, advanced: 0.6 } },
            proposals: { hours: 350, gatePass: 93, rating: 4.6, complexity: { basic: 0.15, intermediate: 0.4, advanced: 0.45 } },
            revops: { hours: 290, gatePass: 91, rating: 4.5, complexity: { basic: 0.2, intermediate: 0.4, advanced: 0.4 } },
            strategy: { hours: 780, gatePass: 96, rating: 4.9, complexity: { basic: 0.05, intermediate: 0.25, advanced: 0.7 } }
        }
    }
];

// ===== INITIALIZATION =====
document.addEventListener('DOMContentLoaded', function() {
    initNavigation();
    initMobileMenu();
    initOverviewLinks();
    initAssessmentTabs();
    initAQSCalculator();
    initQualityReview();
    initSimulator();
    initStaffing();

    renderCompetencies();
    renderSpecializations();
});

// ===== NAVIGATION =====
function initNavigation() {
    const navTabs = document.querySelectorAll('.nav-tab');

    navTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const viewId = tab.dataset.view;
            navigateTo(viewId);
        });
    });
}

function navigateTo(viewId) {
    const navTabs = document.querySelectorAll('.nav-tab');
    const views = document.querySelectorAll('.view');

    navTabs.forEach(t => t.classList.remove('active'));
    document.querySelector(`.nav-tab[data-view="${viewId}"]`)?.classList.add('active');

    views.forEach(view => view.classList.remove('active'));
    document.getElementById(`${viewId}-view`)?.classList.add('active');

    // Close mobile menu if open
    document.getElementById('navTabs')?.classList.remove('open');
}

function initMobileMenu() {
    const btn = document.getElementById('mobileMenuBtn');
    const navTabs = document.getElementById('navTabs');
    if (btn && navTabs) {
        btn.addEventListener('click', () => navTabs.classList.toggle('open'));
    }
}

function initOverviewLinks() {
    document.querySelectorAll('[data-nav]').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            navigateTo(link.dataset.nav);
        });
    });
}

// ===== COMPETENCIES =====
function renderCompetencies() {
    const container = document.getElementById('competenciesGrid');
    if (!container) return;

    container.innerHTML = competencies.map(comp => `
        <div class="competency-card">
            <div class="competency-header">
                <span class="competency-icon">${comp.icon}</span>
                <h3>${comp.name}</h3>
            </div>
            <p class="competency-desc">${comp.description}</p>
            <div class="competency-levels">
                <div class="comp-level"><span class="level-tag a1">A1</span>${comp.A1}</div>
                <div class="comp-level"><span class="level-tag a2">A2</span>${comp.A2}</div>
                <div class="comp-level"><span class="level-tag a3">A3</span>${comp.A3}</div>
                <div class="comp-level"><span class="level-tag a4">A4</span>${comp.A4}</div>
            </div>
        </div>
    `).join('');
}

// ===== SPECIALIZATIONS =====
function renderSpecializations() {
    const container = document.getElementById('specializationsGrid');
    if (!container) return;

    container.innerHTML = Object.entries(specializations).map(([key, spec]) => `
        <div class="spec-card">
            <div class="spec-header">
                <span class="spec-icon">${spec.icon}</span>
                <h3>${spec.name}</h3>
            </div>
            <p class="spec-desc">${spec.description}</p>

            ${spec.methods ? `
            <div class="spec-methods">
                <h4>Key Methods</h4>
                <ul>
                    ${spec.methods.map(m => `<li>${m}</li>`).join('')}
                </ul>
            </div>
            ` : ''}

            ${spec.skills ? `
            <div class="spec-skills">
                <h4>Core Skills</h4>
                <div class="skills-tags">
                    ${spec.skills.map(s => `<span class="skill-tag">${s}</span>`).join('')}
                </div>
            </div>
            ` : ''}

            ${spec.skillsRequired ? `
            <div class="spec-skills-required">
                <h4>Underlying Skills</h4>
                <div class="skills-mapping">
                    <div class="skills-group primary-skills">
                        <span class="skills-group-label">Essential</span>
                        <div class="skills-list">
                            ${spec.skillsRequired.primary.map(skillId => {
                                const skill = underlyingSkills[skillId];
                                return skill ? `<span class="underlying-skill primary" title="${skill.description}">${skill.icon} ${skill.name}</span>` : '';
                            }).join('')}
                        </div>
                    </div>
                    <div class="skills-group secondary-skills">
                        <span class="skills-group-label">Helpful</span>
                        <div class="skills-list">
                            ${spec.skillsRequired.secondary.map(skillId => {
                                const skill = underlyingSkills[skillId];
                                return skill ? `<span class="underlying-skill secondary" title="${skill.description}">${skill.icon} ${skill.name}</span>` : '';
                            }).join('')}
                        </div>
                    </div>
                </div>
            </div>
            ` : ''}

            <div class="spec-deliverables-tiers">
                <h4>Deliverables by Complexity</h4>
                <div class="deliverables-grid">
                    <div class="deliverable-tier">
                        <h5 class="tier-label basic">Basic</h5>
                        <ul>
                            ${spec.deliverables.basic.map(d => `<li>${d}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="deliverable-tier">
                        <h5 class="tier-label intermediate">Intermediate</h5>
                        <ul>
                            ${spec.deliverables.intermediate.map(d => `<li>${d}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="deliverable-tier">
                        <h5 class="tier-label advanced">Advanced</h5>
                        <ul>
                            ${spec.deliverables.advanced.map(d => `<li>${d}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    `).join('');
}

// ===== ASSESSMENT =====
function initAssessmentTabs() {
    const tabs = document.querySelectorAll('.assessment-tab');
    const panels = document.querySelectorAll('.assessment-panel');

    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = tab.dataset.assess;

            tabs.forEach(t => t.classList.remove('active'));
            tab.classList.add('active');

            panels.forEach(p => p.classList.remove('active'));
            document.getElementById(`${target}-panel`)?.classList.add('active');
        });
    });
}

// ===== AQS CALCULATOR =====
function initAQSCalculator() {
    const inputs = [
        { id: 'firstSubmissionScore', suffix: '' },
        { id: 'zeroRevisionRate', suffix: '%' },
        { id: 'avgRevisions', suffix: '' },
        { id: 'onTimeRate', suffix: '%' },
        { id: 'clientFeedback', suffix: '' },
        { id: 'pmFeedback', suffix: '' },
        { id: 'peerFeedback', suffix: '' },
        { id: 'timeLogging', suffix: '%' },
        { id: 'dailyUpdates', suffix: '%' },
        { id: 'processAdherence', suffix: '%' }
    ];

    inputs.forEach(input => {
        const el = document.getElementById(input.id);
        if (el) {
            el.addEventListener('input', () => {
                document.getElementById(`${input.id}Value`).textContent = el.value + input.suffix;
                calculateAQS();
            });
        }
    });

    calculateAQS();
}

function calculateAQS() {
    // Work Quality inputs (35%) - AI-assessed
    const firstSubmission = parseFloat(document.getElementById('firstSubmissionScore')?.value) || 0;
    const zeroRevisionRate = parseFloat(document.getElementById('zeroRevisionRate')?.value) || 0;
    const avgRevisions = parseFloat(document.getElementById('avgRevisions')?.value) || 0;

    // Delivery inputs (20%) - PM input
    const onTime = parseFloat(document.getElementById('onTimeRate')?.value) || 0;

    // Satisfaction inputs (25%) - Human input
    const client = parseFloat(document.getElementById('clientFeedback')?.value) || 0;
    const pm = parseFloat(document.getElementById('pmFeedback')?.value) || 0;
    const peer = parseFloat(document.getElementById('peerFeedback')?.value) || 0;

    // Gratia Standards inputs (20%) - System data
    const timeLogging = parseFloat(document.getElementById('timeLogging')?.value) || 0;
    const dailyUpdates = parseFloat(document.getElementById('dailyUpdates')?.value) || 0;
    const processAdherence = parseFloat(document.getElementById('processAdherence')?.value) || 0;

    // Work Quality (35%): First-submission score (50%) + Zero-revision rate (30%) + Low avg revisions (20%)
    const revisionPenalty = Math.max(0, 100 - (avgRevisions * 40)); // 0 revisions = 100, 2.5 revisions = 0
    const quality = ((firstSubmission / 5) * 100 * 0.5) + (zeroRevisionRate * 0.3) + (revisionPenalty * 0.2);

    // Delivery (20%): Just on-time rate
    const delivery = onTime;

    // Satisfaction (25%): Client (50%) + PM (35%) + Peer (15%)
    const satisfaction = ((client / 5) * 100 * 0.5) + ((pm / 5) * 100 * 0.35) + ((peer / 5) * 100 * 0.15);

    // Gratia Standards (20%): Time logging (40%) + Daily updates (30%) + Process (30%)
    const standards = (timeLogging * 0.4) + (dailyUpdates * 0.3) + (processAdherence * 0.3);

    // Final AQS: Quality (35%) + Delivery (20%) + Satisfaction (25%) + Standards (20%)
    const aqs = Math.round((quality * 0.35) + (delivery * 0.20) + (satisfaction * 0.25) + (standards * 0.20));

    // Update display
    const aqsEl = document.getElementById('aqsScore');
    if (aqsEl) aqsEl.textContent = aqs;

    // Update gauge
    const circumference = 2 * Math.PI * 90;
    const offset = circumference - (aqs / 100) * circumference;
    const progressEl = document.getElementById('aqsProgress');
    if (progressEl) progressEl.style.strokeDashoffset = offset;

    // Update level indicator
    let level = 'Below A1';
    let range = 'Below 70';
    if (aqs >= 95) { level = 'A4 Level'; range = '95+ range'; }
    else if (aqs >= 90) { level = 'A3 Level'; range = '90-95 range'; }
    else if (aqs >= 80) { level = 'A2 Level'; range = '80-90 range'; }
    else if (aqs >= 70) { level = 'A1 Level'; range = '70-80 range'; }

    const levelEl = document.getElementById('aqsLevelIndicator');
    const rangeEl = document.getElementById('aqsLevelRange');
    if (levelEl) levelEl.textContent = level;
    if (rangeEl) rangeEl.textContent = range;

    // Update breakdown
    const qualVal = document.getElementById('breakdownQualityValue');
    const delVal = document.getElementById('breakdownDeliveryValue');
    const satVal = document.getElementById('breakdownSatisfactionValue');
    const stdVal = document.getElementById('breakdownStandardsValue');
    if (qualVal) qualVal.textContent = Math.round(quality * 0.35);
    if (delVal) delVal.textContent = Math.round(delivery * 0.20);
    if (satVal) satVal.textContent = Math.round(satisfaction * 0.25);
    if (stdVal) stdVal.textContent = Math.round(standards * 0.20);
}

// ===== QUALITY REVIEW =====
function initQualityReview() {
    const specSelect = document.getElementById('qualitySpecSelect');
    if (specSelect) {
        specSelect.addEventListener('change', (e) => renderQualityDimensions(e.target.value));
        renderQualityDimensions('financial');
    }
}

function renderQualityDimensions(specKey) {
    const universalContainer = document.getElementById('universalDimensions');
    const specificContainer = document.getElementById('specificDimensions');

    if (!universalContainer || !specificContainer) return;

    // Render universal dimensions
    universalContainer.innerHTML = assessmentDimensions.universal.map(dim => `
        <div class="dimension-card">
            <div class="dimension-name">${dim.name}</div>
            <div class="dimension-desc">${dim.description}</div>
        </div>
    `).join('');

    // Render specialization-specific dimensions
    const specDimensions = assessmentDimensions[specKey] || [];
    specificContainer.innerHTML = specDimensions.map(dim => `
        <div class="dimension-card specific">
            <div class="dimension-name">${dim.name}</div>
            <div class="dimension-desc">${dim.description}</div>
        </div>
    `).join('');
}

// ===== SIMULATOR =====
let simProjects = [];

function initSimulator() {
    // Name input
    const nameEl = document.getElementById('simName');
    if (nameEl) {
        nameEl.addEventListener('input', (e) => {
            const initials = e.target.value.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);
            document.getElementById('simAvatar').textContent = initials || 'NA';
        });
    }

    // Hours inputs
    renderSimHoursInputs();

    // Buttons
    document.getElementById('randomizeProjects')?.addEventListener('click', generateProjects);
    document.getElementById('runSimulation')?.addEventListener('click', runSimulation);

    generateProjects();
    runSimulation();
}

function renderSimHoursInputs() {
    const container = document.getElementById('simHoursInputs');
    if (!container) return;

    const topSpecs = ['financial', 'research', 'pitch'];
    container.innerHTML = topSpecs.map(key => `
        <div class="hours-row">
            <label>${specializations[key].name}</label>
            <input type="number" id="hours-${key}" value="${Math.floor(Math.random() * 300) + 50}" class="form-input-small">
        </div>
    `).join('');
}

function generateProjects() {
    const level = document.getElementById('simLevel')?.value || 'A2';
    const rates = {
        A1: { avgScore: 3.2, passRate: 0.55, onTime: 0.70 },
        A2: { avgScore: 3.8, passRate: 0.75, onTime: 0.85 },
        A3: { avgScore: 4.3, passRate: 0.90, onTime: 0.95 },
        A4: { avgScore: 4.7, passRate: 0.95, onTime: 0.99 }
    }[level];

    const projectTypes = [
        { name: 'DCF Valuation', spec: 'financial' },
        { name: 'Investor Pitch Deck', spec: 'pitch' },
        { name: 'Market Size Analysis', spec: 'research' },
        { name: 'KPI Dashboard', spec: 'dashboards' },
        { name: 'Process Mapping', spec: 'process' }
    ];

    simProjects = [];
    for (let i = 0; i < 6; i++) {
        const type = projectTypes[Math.floor(Math.random() * projectTypes.length)];
        // Generate review score with some variance around level average
        const variance = (Math.random() - 0.5) * 1.5;
        const reviewScore = Math.max(1, Math.min(5, rates.avgScore + variance));
        const passed = reviewScore >= 3.5;
        const exceeded = reviewScore >= 4.5;
        const onTime = Math.random() < rates.onTime;
        const clientRating = passed ? (3.5 + Math.random() * 1.5).toFixed(1) : (2.5 + Math.random() * 1.5).toFixed(1);

        simProjects.push({
            name: type.name,
            spec: type.spec,
            reviewScore: parseFloat(reviewScore.toFixed(1)),
            passed,
            exceeded,
            onTime,
            clientRating: parseFloat(clientRating)
        });
    }

    renderProjects();
    updateProjectStats();
}

function renderProjects() {
    const container = document.getElementById('simProjectList');
    if (!container) return;

    container.innerHTML = simProjects.map(p => {
        const status = p.exceeded ? 'pass' : (p.passed ? 'partial' : 'fail');
        const outcomeLabel = p.exceeded ? 'Exceeded' : (p.passed ? 'Passed' : 'Revise');
        return `
            <div class="sim-project-item">
                <div class="project-status ${status}"></div>
                <div class="project-info">
                    <span class="project-name">${p.name}</span>
                </div>
                <div class="project-meta">
                    <span class="review-score">${p.reviewScore}</span>
                    <span class="${p.passed ? 'pass' : 'fail'}">${outcomeLabel}</span>
                    <span>${p.onTime ? '✓' : 'Late'}</span>
                    <span>⭐${p.clientRating}</span>
                </div>
            </div>
        `;
    }).join('');
}

function updateProjectStats() {
    if (simProjects.length === 0) return;

    const avgReviewScore = (simProjects.reduce((s, p) => s + p.reviewScore, 0) / simProjects.length).toFixed(1);
    const passRate = Math.round((simProjects.filter(p => p.passed).length / simProjects.length) * 100);
    const onTimeRate = Math.round((simProjects.filter(p => p.onTime).length / simProjects.length) * 100);
    const avgClientRating = (simProjects.reduce((s, p) => s + p.clientRating, 0) / simProjects.length).toFixed(1);

    document.getElementById('simAvgReview').textContent = avgReviewScore;
    document.getElementById('simPassRate').textContent = passRate + '%';
    document.getElementById('simOnTimeRate').textContent = onTimeRate + '%';
    document.getElementById('simAvgRating').textContent = avgClientRating;
}

function runSimulation() {
    if (simProjects.length === 0) return;

    const level = document.getElementById('simLevel')?.value || 'A2';

    const avgReviewScore = simProjects.reduce((s, p) => s + p.reviewScore, 0) / simProjects.length;
    const passRate = simProjects.filter(p => p.passed).length / simProjects.length;
    const exceededRate = simProjects.filter(p => p.exceeded).length / simProjects.length;
    const onTimeRate = simProjects.filter(p => p.onTime).length / simProjects.length;
    const avgClientRating = simProjects.reduce((s, p) => s + p.clientRating, 0) / simProjects.length;

    // Work Quality (35%): Avg score (50%) + Pass rate (30%) + Exceeded rate (20%)
    const quality = ((avgReviewScore / 5) * 100 * 0.5) + (passRate * 100 * 0.3) + (exceededRate * 100 * 0.2);

    // Delivery (25%): On-time (60%) + Low-revision (40%)
    const revisionRate = 1 - passRate; // Projects needing revision
    const delivery = (onTimeRate * 100 * 0.6) + ((1 - revisionRate) * 100 * 0.4);

    // Professionalism (25%): Client feedback
    const professionalism = (avgClientRating / 5) * 100;

    // Gratia Standards (15%): Simulated at 90% for demo
    const standards = 90;

    const aqs = Math.round((quality * 0.35) + (delivery * 0.25) + (professionalism * 0.25) + (standards * 0.15));

    document.getElementById('simAQS').textContent = aqs;

    let perfLevel = 'Below A1';
    if (aqs >= 95) perfLevel = 'A4';
    else if (aqs >= 90) perfLevel = 'A3';
    else if (aqs >= 80) perfLevel = 'A2';
    else if (aqs >= 70) perfLevel = 'A1';

    document.getElementById('simPerfLevel').textContent = perfLevel;

    const nextLevel = { A1: 'A2', A2: 'A3', A3: 'A4', A4: 'A4' }[level];
    document.getElementById('simNextLevel').textContent = nextLevel;

    // Calculate promotion progress
    const targetAQS = { A1: 80, A2: 90, A3: 95, A4: 100 }[level];
    const progress = Math.min(100, Math.round((aqs / targetAQS) * 100));
    document.getElementById('simPromoFill').style.width = progress + '%';

    // Render requirements
    const reqs = getPromoRequirements(level, aqs, avgClientRating);
    const reqsEl = document.getElementById('simPromoReqs');
    if (reqsEl) {
        reqsEl.innerHTML = reqs.map(r => `
            <div class="promo-req ${r.met ? 'met' : 'unmet'}">
                <span>${r.met ? '✓' : '○'}</span>
                <span>${r.label}</span>
            </div>
        `).join('');
    }
}

function getPromoRequirements(level, aqs, avgClientRating) {
    const passRate = simProjects.filter(p => p.passed).length / simProjects.length;
    const exceededCount = simProjects.filter(p => p.exceeded).length;

    const requirements = {
        A1: [
            { label: 'AQS 80+', met: aqs >= 80 },
            { label: '4+ client rating', met: avgClientRating >= 4 },
            { label: '70%+ pass rate', met: passRate >= 0.7 }
        ],
        A2: [
            { label: 'AQS 90+', met: aqs >= 90 },
            { label: '4.5+ client rating', met: avgClientRating >= 4.5 },
            { label: '3+ exceeded reviews', met: exceededCount >= 3 }
        ],
        A3: [
            { label: 'AQS 95+', met: aqs >= 95 },
            { label: '4.8+ client rating', met: avgClientRating >= 4.8 },
            { label: 'Consistent exceeded', met: exceededCount >= 5 }
        ],
        A4: [
            { label: 'Maximum level achieved', met: true }
        ]
    };
    return requirements[level] || [];
}

// ===== STAFFING =====
function initStaffing() {
    document.getElementById('findAnalysts')?.addEventListener('click', findAnalysts);
    findAnalysts();
}

// Calculate psychometric fit between analyst and client profile
// Returns 0-100 score and breakdown
function calculatePsychometricFit(analyst, clientProfileKey) {
    if (!analyst.psychometrics) return { score: null, breakdown: [], label: 'No profile' };

    const clientProfile = clientProfileTemplates[clientProfileKey];
    if (!clientProfile) return { score: null, breakdown: [], label: 'No client profile' };

    const breakdown = [];
    let totalDiff = 0;
    let dimensions = 0;

    Object.entries(psychometricDimensions).forEach(([key, dim]) => {
        const analystVal = analyst.psychometrics[key];
        const clientPref = clientProfile.preferences[key];

        if (analystVal !== undefined && clientPref !== undefined) {
            // Calculate absolute difference (0 = perfect match, 1 = opposite ends)
            const diff = Math.abs(analystVal - clientPref);
            totalDiff += diff;
            dimensions++;

            // Determine alignment
            let alignment = 'good';
            if (diff > 0.4) alignment = 'mismatch';
            else if (diff > 0.25) alignment = 'moderate';

            breakdown.push({
                dimension: dim.name,
                analystPosition: analystVal,
                clientPreference: clientPref,
                diff,
                alignment,
                spectrum: dim.spectrum
            });
        }
    });

    // Convert average diff to 0-100 score (lower diff = higher score)
    const avgDiff = dimensions > 0 ? totalDiff / dimensions : 0.5;
    const score = Math.round((1 - avgDiff) * 100);

    // Determine overall label
    let label = 'Good Fit';
    let level = 'good';
    if (score >= 80) { label = 'Excellent Fit'; level = 'excellent'; }
    else if (score < 60) { label = 'May Need Alignment'; level = 'caution'; }

    return { score, breakdown, label, level };
}

// Get psychometric summary for display
function getPsychometricSummary(analyst) {
    if (!analyst.psychometrics) return [];

    const summary = [];
    Object.entries(psychometricDimensions).forEach(([key, dim]) => {
        const val = analyst.psychometrics[key];
        if (val !== undefined) {
            // Determine which end of spectrum they lean toward
            const position = val < 0.4 ? dim.spectrum[0] :
                            val > 0.6 ? dim.spectrum[1] : 'Balanced';
            summary.push({ dimension: dim.name, position, value: val });
        }
    });
    return summary;
}

function getAnalystSpecScore(analyst, specKey) {
    const specData = analyst.specializations[specKey];
    if (!specData) return 0;
    return calculateSpecScore(specData.hours, specData.gatePass, specData.rating, specData.complexity);
}

function findAnalysts() {
    const spec = document.getElementById('staffing-spec')?.value || 'financial';
    const minTier = document.getElementById('staffing-tier')?.value || 'proficient';
    const minLevel = document.getElementById('staffing-level')?.value || 'A2';
    const clientProfile = document.getElementById('staffing-client-profile')?.value || '';

    const levelOrder = { A1: 1, A2: 2, A3: 3, A4: 4 };
    const tierThresholds = { familiar: 50, proficient: 70, expert: 85 };
    const minLevelNum = levelOrder[minLevel];
    const minScore = tierThresholds[minTier];

    const matches = analysts
        .map(a => {
            const psychoFit = clientProfile ? calculatePsychometricFit(a, clientProfile) : null;
            return {
                ...a,
                specScore: getAnalystSpecScore(a, spec),
                specData: a.specializations[spec],
                psychoFit
            };
        })
        .filter(a => {
            const levelNum = levelOrder[a.level];
            return a.specScore >= minScore && levelNum >= minLevelNum;
        })
        .sort((a, b) => b.specScore - a.specScore);

    renderStaffingResults(matches, spec, clientProfile);
}

function renderStaffingResults(matches, spec, clientProfile) {
    const container = document.getElementById('staffingResults');
    if (!container) return;

    if (matches.length === 0) {
        container.innerHTML = `<div class="no-results">No analysts match the criteria. Try adjusting your filters.</div>`;
        return;
    }

    // Calculate match confidence based on spec score relative to requirements
    const getMatchConfidence = (specScore, tier) => {
        const thresholds = { familiar: 50, proficient: 70, expert: 85 };
        const minRequired = thresholds[tier] || 70;
        const excess = specScore - minRequired;
        if (excess >= 20) return { level: 'excellent', label: 'Excellent Match', color: 'var(--success)' };
        if (excess >= 10) return { level: 'good', label: 'Good Match', color: 'var(--primary)' };
        return { level: 'meets', label: 'Meets Requirements', color: 'var(--warning)' };
    };

    const minTier = document.getElementById('staffing-tier')?.value || 'proficient';

    container.innerHTML = matches.map(a => {
        const tierInfo = getSpecTier(a.specScore);
        const advancedPct = Math.round(a.specData.complexity.advanced * 100);
        const matchConf = getMatchConfidence(a.specScore, minTier);
        const availabilityClass = a.availability === 'available' ? 'available' : 'limited';

        // Psychometric fit rendering
        const psychoSection = a.psychoFit && a.psychoFit.score !== null ? `
            <div class="analyst-psycho">
                <div class="psycho-header">
                    <span class="psycho-label">Work Style Fit</span>
                    <span class="psycho-score fit-${a.psychoFit.level}">${a.psychoFit.score}% · ${a.psychoFit.label}</span>
                </div>
                <div class="psycho-traits">
                    ${getPsychometricSummary(a).slice(0, 4).map(t => `
                        <span class="trait-tag">${t.position}</span>
                    `).join('')}
                </div>
            </div>
        ` : (clientProfile ? `
            <div class="analyst-psycho no-profile">
                <span class="psycho-label">Work Style Fit</span>
                <span class="psycho-na">No profile on file</span>
            </div>
        ` : '');

        return `
            <div class="analyst-card match-${matchConf.level}">
                <div class="analyst-card-header">
                    <div class="analyst-avatar">${a.initials}</div>
                    <div class="analyst-info">
                        <h4>${a.name}</h4>
                        <span class="analyst-level">${a.level} · ${levels[a.level].name}</span>
                        <span class="analyst-availability ${availabilityClass}">${a.availability === 'available' ? '● Available' : '◐ Limited'}</span>
                    </div>
                    <div class="match-confidence">
                        <span class="match-badge" style="background: ${matchConf.color}">${matchConf.label}</span>
                        <span class="spec-score">SS ${a.specScore}</span>
                    </div>
                </div>
                <div class="analyst-meta">
                    <div class="meta-item">
                        <span class="meta-label">Spec Tier</span>
                        <span class="meta-value spec-${tierInfo.tier}">${tierInfo.label}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Hours</span>
                        <span class="meta-value">${a.specData.hours}</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Rating</span>
                        <span class="meta-value">${a.specData.rating.toFixed(1)}/5</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Advanced</span>
                        <span class="meta-value">${advancedPct}%</span>
                    </div>
                    <div class="meta-item">
                        <span class="meta-label">Timezone</span>
                        <span class="meta-value">${a.timezone || 'N/A'}</span>
                    </div>
                </div>
                ${psychoSection}
                <div class="analyst-notes">
                    <div class="notes-section strengths">
                        <span class="notes-label">Strengths</span>
                        <ul>${a.strengths?.map(s => `<li>${s}</li>`).join('') || ''}</ul>
                    </div>
                    <div class="notes-section considerations">
                        <span class="notes-label">Considerations</span>
                        <ul>${a.considerations?.map(c => `<li>${c}</li>`).join('') || ''}</ul>
                    </div>
                </div>
                <div class="analyst-recent">
                    <span class="recent-label">Recent work:</span>
                    <span class="recent-value">${a.recentWork || 'N/A'}</span>
                </div>
            </div>
        `;
    }).join('');
}

// ===== CLIENT VIEW =====
function initClientView() {
    const selector = document.getElementById('clientAnalystSelect');
    if (selector) {
        selector.addEventListener('change', (e) => {
            const analyst = analysts.find(a => a.id === parseInt(e.target.value));
            if (analyst) renderClientProfile(analyst);
        });
    }
    renderClientProfile(analysts[0]);
}

function renderClientProfile(analyst) {
    document.getElementById('clientAvatar').textContent = analyst.initials;
    document.getElementById('clientName').textContent = analyst.name;
    document.getElementById('clientLevel').textContent = `${analyst.level} · ${levels[analyst.level].name}`;

    const totalHours = Object.entries(analyst.specializations).reduce((sum, [_, s]) => sum + s.hours, 0);
    const projectCount = Math.floor(totalHours / 30);
    const avgRating = Object.values(analyst.specializations).reduce((sum, s) => sum + s.rating, 0) / 9;

    document.getElementById('clientProjects').textContent = projectCount + '+';
    document.getElementById('clientRating').textContent = avgRating.toFixed(1);
    document.getElementById('clientOnTime').textContent = Math.round(analyst.aqs * 1.02) + '%';

    // Render specializations with Spec Scores
    const specsWithScores = Object.entries(analyst.specializations)
        .map(([key, data]) => ({
            key,
            data,
            score: calculateSpecScore(data.hours, data.gatePass, data.rating, data.complexity)
        }))
        .filter(s => s.score >= 50)
        .sort((a, b) => b.score - a.score)
        .slice(0, 4);

    const specsEl = document.getElementById('clientSpecs');
    if (specsEl) {
        specsEl.innerHTML = specsWithScores.map(s => {
            const tierInfo = getSpecTier(s.score);
            return `<span class="spec-tag ${tierInfo.tier}">${specializations[s.key]?.name || s.key} · ${tierInfo.label}</span>`;
        }).join('');
    }

    // Render deliverables based on complexity mix of top specialization
    const topSpec = specsWithScores[0];
    const deliverablesEl = document.getElementById('clientDeliverables');
    if (deliverablesEl && topSpec) {
        const spec = specializations[topSpec.key];
        const deliverables = [];
        // Show deliverables based on what complexity they've done
        if (topSpec.data.complexity.advanced > 0.2) {
            deliverables.push(...spec.deliverables.advanced.slice(0, 2));
        }
        if (topSpec.data.complexity.intermediate > 0.2) {
            deliverables.push(...spec.deliverables.intermediate.slice(0, 2));
        }
        if (deliverables.length < 4) {
            deliverables.push(...spec.deliverables.basic.slice(0, 4 - deliverables.length));
        }
        deliverablesEl.innerHTML = deliverables.slice(0, 4).map(d => `<li>${d}</li>`).join('');
    }
}
</script>
</body>
</html>
